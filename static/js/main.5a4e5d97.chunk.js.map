{"version":3,"sources":["reducers/modules/index.js","reducers/modules sync nonrecursive //.js$","reducers/modules/index.test.js","actions sync nonrecursive //.js$","actions/index.test.js","actions/Websocket.js","actions/Recorder.js","registerServiceWorker.js","reducers/index.js","components/VolumeMeter/Meter/index.js","components/Websocket/index.js","components/VolumeMeter/index.js","components/MenuAppBar/RegisterSpeaker/Record/index.js","components/MenuAppBar/RegisterSpeaker/index.js","components/MenuAppBar/index.js","components/Footer/index.js","components/AppTextArea/Response/index.js","components/AppTextArea/index.js","components/App/index.js","index.js","reducers/modules/Websocket.js","reducers/modules/Recorder.js","reducers/modules/LoginManager.js","reducers/modules/Host.js","actions/index.js","actions/LoginManager.js"],"names":["__webpack_require__","r","__webpack_exports__","files","require","modules","keys","forEach","key","match","replace","default","map","./Host.js","./LoginManager.js","./Recorder.js","./Websocket.js","./index.js","./index.test.js","webpackContext","req","id","webpackContextResolve","e","Error","code","Object","resolve","module","exports","describe","initialState","connected","responses","google","kaldi","it","expect","Websocket","undefined","toEqual","type","_home_travis_build_Sean2525_VAWSR_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","transcript_google","transcript_kaldi","expectedState","proba","result","LoginManager","logined","action","fbid","email","name","hasivector","assign","stream","test","Recorder","record","Host","hostname","user","expectedAction","d","on_connect","update_google","update_kaldi","stop_stream","startRecord","stopRecord","updateStream","isLocalhost","Boolean","window","location","registerValidSW","swUrl","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","console","log","catch","error","combineReducers","Slider","styled","div","_templateObject","Bar","_templateObject2","BarFill","_templateObject3","Track","_templateObject4","Grabber","_templateObject5","Meter","_this$props","this","props","width","threshold","handleMouse","react_default","a","createElement","style","background","position","top","onMouseDown","left","React","Component","context","AudioContext","componentDidMount","_this","socket","processor","createScriptProcessor","connect","destination","suspend","input","createMediaStreamSource","onaudioprocess","microphoneProcess","registerEvents","componentDidUpdate","prevProps","startRecording","stopRecording","on","_ref","transcript","is_final","setState","prevState","toConsumableArray","concat","reduce","x","y","_ref2","_ref3","emit","resume","inputBuffer","getChannelData","left16","downsampleBuffer","buffer","sampleRate","outSampleRate","sampleRateRatio","newLength","Math","round","length","Int16Array","offsetResult","offsetBuffer","nextOffsetBuffer","accum","count","i","min","dispatch","bindActionCreators","VolumeMeter","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","loop","analyser","getByteTimeDomainData","array","percentage","float","rms","db","total","sqrt","log10","max","volume","Number","toFixed","_this$state","document","addEventListener","handleMouseMove","handleMouseUp","event","clientX","node","offsetLeft","offsetWidth","clientWidth","removeEventListener","cookie","set","webkitAudioContext","audioContext","src","Cookies","_this2","mediaDevices","getUserMedia","audio","setupAnalyser","get","_this$state2","createAnalyser","Uint8Array","frequencyBinCount","setInterval","_this3","_this$state3","ref","VolumeMeter_Meter","components_Websocket","Record","recorder","MediaStreamRecorder","mimeType","audioChannels","ondataavailable","blob","handleURL","ready","start","stop","classes","className","Button_default","button","variant","color","onClick","disabled","Stop_default","Mic_default","withStyles","theme","margin","spacing","unit","Transition","Slide_default","direction","RegisterSpeaker","_React$Component","_getPrototypeOf2","_len","arguments","args","Array","_key","apply","open","sentences","audioBlob","step","loading","handleClick","generateSentences","handleClose","callback","handleBack","handleNext","fd","FormData","append","axios","post","headers","Content-Type","toast","success","obj","replayBlob","blobURL","URL","createObjectURL","Audio","play","res","data","inherits","createClass","value","MenuItem_default","Dialog_default","fullScreen","onClose","TransitionComponent","AppBar_default","appBar","Toolbar_default","IconButton_default","aria-label","Close_default","Typography_default","flex","MobileStepper_default","dots","steps","activeStep","backButton","nextButton","autoFocus","CircularProgress_default","size","buttonProgress","DialogTitle_default","DialogContent_default","DialogContentText_default","RegisterSpeaker_Record","PlayArrow_default","backgroundColor","green","marginTop","marginLeft","defaults","withCredentials","PrimarySearchAppBar","anchorEl","handleProfileMenuOpen","currentTarget","handleMenuClose","handleLogin","login","token","accessToken","signed","signedRequest","POSITION","BOTTOM_RIGHT","finally","handleLogout","_this$props2","logout","warn","_this$props3","_this$props4","isMenuOpen","renderMenu","Menu_default","anchorOrigin","vertical","horizontal","transformOrigin","facebook_login_render_props_default","appId","fields","disableMobileRedirect","render","renderProps","MenuAppBar_RegisterSpeaker","root","menuButton","icons_Menu_default","title","noWrap","search","searchIcon","Search_default","InputBase_default","placeholder","inputRoot","inputInput","grow","sectionDesktop","aria-owns","aria-haspopup","Avatar_default","alt","AccountCircle_default","sectionMobile","flexGrow","marginRight","defineProperty","display","breakpoints","up","borderRadius","shape","fade","palette","common","white","&:hover","height","pointerEvents","alignItems","justifyContent","paddingTop","paddingRight","paddingBottom","paddingLeft","transition","transitions","create","FooterP","p","Footer_templateObject","Footer","flexWrap","flexRight","clear","margin-left","k_margin","margin-right","TextField_default","label","defaultValue","multiline","InputProps","startAdornment","InputAdornment_default","index_es","icon","readOnly","classNames","Divider_default","TextArea","AppTextArea_templateObject","AppTextArea","responseItem","push","AppTextArea_Response","AppWrapper","App_templateObject","App","MenuAppBar","components_AppTextArea","components_VolumeMeter","components_Footer","react_toastify_lib","library","add","fab","fas","createMuiTheme","typography","useNextVariants","store","createStore","reducers","__REDUX_DEVTOOLS_EXTENSION__","ReactDOM","es","core_styles","BrowserRouter","components_App","getElementById","process","origin","fetch","response","status","indexOf","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.5a4e5d97.chunk.js","sourcesContent":["const files = require.context('.', false, /\\.js$/)\nconst modules = {}\n\nfiles.keys().forEach(key => {\n  if (key.match(/\\.\\/index.*js/)) return\n  modules[key.replace(/(\\.\\/|\\.js)/g, '')] = files(key).default\n})\n\nexport default modules\n","var map = {\n\t\"./Host.js\": 80,\n\t\"./LoginManager.js\": 61,\n\t\"./Recorder.js\": 51,\n\t\"./Websocket.js\": 43,\n\t\"./index.js\": 107,\n\t\"./index.test.js\": 205\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) { // check for number or string\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn id;\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 204;","import Websocket from './Websocket'\nimport LoginManager from './LoginManager'\nimport Recorder from './Recorder'\nimport Host from './Host'\n\ndescribe('Websocket reducer', () => {\n  const initialState = {\n    connected: false,\n    responses: [],\n    google: '',\n    kaldi: ''\n  }\n  it('should return the initial state', () => {\n    expect(Websocket(undefined, {})).toEqual(initialState)\n  })\n\n  it('should handle ON_CONNECT', () => {\n    expect(\n      Websocket(undefined, {\n        type: 'ON_CONNECT'\n      })\n    ).toEqual({ ...initialState, connected: true })\n  })\n\n  it('should handle TRANSCRIPT_GOOGLE', () => {\n    expect(\n      Websocket(undefined, {\n        type: 'TRANSCRIPT_GOOGLE',\n        transcript_google: 'test'\n      })\n    ).toEqual({ ...initialState, google: 'test' })\n  })\n\n  it('should handle TRANSCRIPT_KALDI', () => {\n    expect(\n      Websocket(undefined, {\n        type: 'TRANSCRIPT_KALDI',\n        transcript_kaldi: 'test'\n      })\n    ).toEqual({ ...initialState, kaldi: 'test' })\n  })\n\n  it('should handle STOP_STREAM', () => {\n    const proba = 0.8\n    const result = ''\n    const expectedState = {\n      ...initialState,\n      responses: [{ google: '', kaldi: '', proba, result }]\n    }\n    expect(\n      Websocket(undefined, {\n        type: 'STOP_STREAM',\n        proba,\n        result\n      })\n    ).toEqual(expectedState)\n  })\n})\n\ndescribe('LoginManager reducer', () => {\n  it('should retrun inital state', () => {\n    const initialState = { logined: false }\n    expect(LoginManager(undefined, {})).toEqual(initialState)\n  })\n\n  it('should handle LOGIN', () => {\n    const action = {\n      fbid: 1,\n      email: 'test',\n      name: 'test',\n      hasivector: false\n    }\n    expect(\n      LoginManager(undefined, Object.assign({ type: 'LOGIN' }, action))\n    ).toEqual({\n      logined: true,\n      ...action\n    })\n  })\n\n  it('should handle LOGOUT', () => {\n    expect(LoginManager(undefined, { type: 'LOGOUT' })).toEqual({\n      logined: false\n    })\n  })\n})\n\ndescribe('Recorder reducer', () => {\n  const stream = { test: 'test' }\n  it('should retrun inital state', () => {\n    const initialState = { record: false }\n    expect(Recorder(undefined, {})).toEqual(initialState)\n  })\n\n  it('should handle UPDATE_STREAM', () => {\n    expect(Recorder(undefined, { type: 'UPDATE_STREAM', stream })).toEqual({\n      record: false,\n      stream\n    })\n  })\n\n  it('should handle START_RECORD', () => {\n    expect(Recorder({ stream }, { type: 'START_RECORD' })).toEqual({\n      record: true,\n      stream\n    })\n  })\n\n  it('should handle STOP_RECORD', () => {\n    expect(Recorder({ stream }, { type: 'STOP_RECORD' })).toEqual({\n      record: false,\n      stream\n    })\n  })\n})\n\ndescribe('Host reducer', () => {\n  it('should retrun inital state', () => {\n    const initialState = { hostname: 'https://vawsr.mino.tw' }\n    expect(Host(undefined, {})).toEqual(initialState)\n  })\n\n  it('should handle CHANGE_HOST', () => {\n    const action = {\n      type: 'CHANGE_HOST',\n      hostname: 'https://test'\n    }\n    expect(Host(undefined, action)).toEqual({\n      hostname: 'https://test'\n    })\n  })\n})\n","var map = {\n\t\"./LoginManager.js\": 82,\n\t\"./Recorder.js\": 35,\n\t\"./Websocket.js\": 32,\n\t\"./index.js\": 81,\n\t\"./index.test.js\": 241\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) { // check for number or string\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn id;\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 240;","import * as Websocket from './Websocket'\nimport * as LoginManager from './LoginManager'\nimport * as Recorder from './Recorder'\n\ndescribe('actions LoginManager', () => {\n  it('should create an action to login', () => {\n    const user = {\n      fbid: 1,\n      email: 'test',\n      name: 'test',\n      hasivector: 'test'\n    }\n    const expectedAction = {\n      type: 'LOGIN',\n      ...user\n    }\n    expect(LoginManager.login(user)).toEqual(expectedAction)\n  })\n\n  it('should create an action to logout', () => {\n    const expectedAction = {\n      type: 'LOGOUT'\n    }\n    expect(LoginManager.logout()).toEqual(expectedAction)\n  })\n})\n\ndescribe('actions Recorder', () => {\n  it('should create an action to startRecord', () => {\n    const expectedAction = {\n      type: 'START_RECORD'\n    }\n    expect(Recorder.startRecord()).toEqual(expectedAction)\n  })\n\n  it('should create an action to stopRecord', () => {\n    const expectedAction = {\n      type: 'STOP_RECORD'\n    }\n    expect(Recorder.stopRecord()).toEqual(expectedAction)\n  })\n\n  it('should create an action to updateStream', () => {\n    const stream = {}\n    const expectedAction = {\n      type: 'UPDATE_STREAM',\n      stream\n    }\n    expect(Recorder.updateStream(stream)).toEqual(expectedAction)\n  })\n})\n\ndescribe('actions Websocket', () => {\n  it('should create an action to Websocket on_connect', () => {\n    const expectedAction = {\n      type: 'ON_CONNECT'\n    }\n    expect(Websocket.on_connect()).toEqual(expectedAction)\n  })\n\n  it('should create an action to Websocket TRANSCRIPT_GOOGLE', () => {\n    const transcript_google = 'test'\n    const expectedAction = {\n      type: 'TRANSCRIPT_GOOGLE',\n      transcript_google\n    }\n    expect(Websocket.update_google(transcript_google)).toEqual(expectedAction)\n  })\n\n  it('should create an action to Websocket TRANSCRIPT_KALDI', () => {\n    const transcript_kaldi = 'test'\n    const expectedAction = {\n      type: 'TRANSCRIPT_KALDI',\n      transcript_kaldi\n    }\n    expect(Websocket.update_kaldi(transcript_kaldi)).toEqual(expectedAction)\n  })\n\n  it('should create an action to Websocket STOP_STREAM', () => {\n    const proba = 0.8\n    const result = ''\n    const expectedAction = {\n      type: 'STOP_STREAM',\n      proba,\n      result\n    }\n    expect(Websocket.stop_stream(proba, result)).toEqual(expectedAction)\n  })\n})\n","export const on_connect = () => {\n  return {\n    type: 'ON_CONNECT'\n  }\n}\n\nexport const update_google = transcript_google => {\n  return {\n    type: 'TRANSCRIPT_GOOGLE',\n    transcript_google\n  }\n}\n\nexport const update_kaldi = transcript_kaldi => {\n  return {\n    type: 'TRANSCRIPT_KALDI',\n    transcript_kaldi\n  }\n}\n\nexport const stop_stream = (proba, result) => {\n  return {\n    type: 'STOP_STREAM',\n    proba,\n    result\n  }\n}\n","export const startRecord = () => {\n  return {\n    type: 'START_RECORD'\n  }\n}\n\nexport const stopRecord = () => {\n  return {\n    type: 'STOP_RECORD'\n  }\n}\n\nexport const updateStream = stream => {\n  return {\n    type: 'UPDATE_STREAM',\n    stream\n  }\n}\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n)\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location)\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl)\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ'\n          )\n        })\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl)\n      }\n    })\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.')\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.')\n            }\n          }\n        }\n      }\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error)\n    })\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload()\n          })\n        })\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl)\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      )\n    })\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister()\n    })\n  }\n}\n","import modules from './modules'\nimport { combineReducers } from 'redux'\n\nexport default combineReducers(modules)\n","import React from 'react'\nimport styled from 'styled-components'\nimport PropTypes from 'prop-types'\n\nconst Slider = styled.div`\n  height: 40px;\n  position: relative;\n  width: 100%;\n`\n\nconst Bar = styled.div`\n  border-radius: 4px;\n  display: block;\n  height: 8px;\n  overflow: hidden;\n  position: relative;\n  top: 16px;\n  width: 100%;\n`\nconst BarFill = styled.div`\n  height: 100%;\n  background: rgba(0, 0, 0, 0.25);\n  transition: width 35ms ease;\n`\n\nconst Track = styled.div`\n  position: absolute;\n  top: 0px;\n  bottom: 0px;\n  right: 5px;\n  left: 5px;\n`\n\nconst Grabber = styled.div`\n  background: #fff;\n  border: 1px solid #dcddde;\n  position: absolute;\n  border-radius: 3px;\n  box-shadow: 0 3px 1px 0 rgba(0, 0, 0, 0.05), 0 2px 2px 0 rgba(0, 0, 0, 0.1),\n    0 3px 3px 0 rgba(0, 0, 0, 0.05);\n  cursor: ew-resize;\n  height: 24px;\n  left: 0px;\n  margin-left: -5px;\n  margin-top: -13px;\n  top: 50%;\n  width: 10px;\n`\n\nclass Meter extends React.Component {\n  static propTypes = {\n    threshold: PropTypes.number.isRequired,\n    width: PropTypes.number.isRequired,\n    handleMouse: PropTypes.func.isRequired\n  }\n\n  render() {\n    const { width, threshold, handleMouse } = this.props\n    return (\n      <Slider>\n        <Bar\n          style={{ background: 'rgb(105, 196, 154) none repeat scroll 0% 0%' }}>\n          <BarFill\n            style={{\n              width: threshold + '%',\n              background: 'rgb(251, 184, 72) none repeat scroll 0% 0%'\n            }}\n          />\n        </Bar>\n        <Bar\n          style={{\n            position: 'absolute',\n            top: '16px',\n            background: 'transparent'\n          }}>\n          <BarFill style={{ width: width + '%' }} />\n        </Bar>\n        <Track onMouseDown={handleMouse}>\n          <Grabber\n            onMouseDown={handleMouse}\n            style={{ left: threshold + '%' }}\n          />\n        </Track>\n      </Slider>\n    )\n  }\n}\n\nexport default Meter\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport PropTypes from 'prop-types'\nimport socket from 'socket.io-client'\nimport { bindActionCreators } from 'redux'\nimport {\n  on_connect,\n  update_google,\n  update_kaldi,\n  stop_stream\n} from '../../actions/Websocket'\n\nclass Websocket extends React.Component {\n  state = {\n    google: [],\n    context: new AudioContext()\n  }\n  componentDidMount = () => {\n    const { stream, on_connect } = this.props\n    const { context } = this.state\n    this.socket = socket('wss://vawsr.mino.tw/ws')\n    on_connect()\n\n    this.processor = context.createScriptProcessor(2048, 1, 1)\n    this.processor.connect(context.destination)\n    context.suspend()\n    this.input = context.createMediaStreamSource(stream)\n    this.input.connect(this.processor)\n\n    this.processor.onaudioprocess = e => {\n      const { record } = this.props\n      if (!record) return\n      this.microphoneProcess(e)\n    }\n    this.registerEvents()\n  }\n\n  componentDidUpdate = prevProps => {\n    const { record } = this.props\n    if (prevProps.record === record) return\n    if (record) {\n      this.startRecording()\n    } else {\n      this.stopRecording()\n    }\n  }\n\n  registerEvents = () => {\n    this.socket.on('google_speech_data', ({ transcript, is_final }) => {\n      if (is_final) {\n        this.setState(prevState => {\n          return { google: [...prevState.google, transcript] }\n        })\n      }\n      const { google } = this.state\n      const { update_google } = this.props\n      update_google(google.reduce((x, y) => x + ' ' + y, '') + transcript)\n    })\n\n    this.socket.on('kaldi_speech_data', ({ transcript }) => {\n      const { update_kaldi } = this.props\n      update_kaldi(transcript)\n    })\n\n    this.socket.on('stop_stream', ({ proba, result }) => {\n      const { stop_stream } = this.props\n      this.setState({ google: [] })\n      stop_stream(proba, result)\n    })\n  }\n\n  startRecording = () => {\n    const { context } = this.state\n    this.socket.emit('start_stream', '')\n    context.resume()\n  }\n\n  stopRecording = () => {\n    const { context } = this.state\n    context.suspend()\n    this.socket.emit('stop_stream', '')\n  }\n\n  microphoneProcess = e => {\n    var left = e.inputBuffer.getChannelData(0)\n    var left16 = this.downsampleBuffer(left, 44100, 16000)\n    this.socket.emit('binary_data', left16)\n  }\n\n  downsampleBuffer = (buffer, sampleRate, outSampleRate) => {\n    if (outSampleRate === sampleRate) {\n      return buffer\n    }\n    if (outSampleRate > sampleRate) {\n      throw Error('downsampling rate show be smaller than original sample rate')\n    }\n    var sampleRateRatio = sampleRate / outSampleRate\n    var newLength = Math.round(buffer.length / sampleRateRatio)\n    var result = new Int16Array(newLength)\n    var offsetResult = 0\n    var offsetBuffer = 0\n    while (offsetResult < result.length) {\n      var nextOffsetBuffer = Math.round((offsetResult + 1) * sampleRateRatio)\n      var accum = 0,\n        count = 0\n      for (\n        var i = offsetBuffer;\n        i < nextOffsetBuffer && i < buffer.length;\n        i++\n      ) {\n        accum += buffer[i]\n        count++\n      }\n\n      result[offsetResult] = Math.min(1, accum / count) * 0x7fff\n      offsetResult++\n      offsetBuffer = nextOffsetBuffer\n    }\n    return result.buffer\n  }\n\n  render() {\n    return <div />\n  }\n}\n\nWebsocket.propTypes = {\n  stream: PropTypes.object.isRequired,\n  record: PropTypes.bool.isRequired,\n  on_connect: PropTypes.func.isRequired,\n  update_google: PropTypes.func.isRequired,\n  update_kaldi: PropTypes.func.isRequired,\n  stop_stream: PropTypes.func.isRequired\n}\n\nconst mapStateToProps = state => {\n  return {\n    record: state.Recorder.record,\n    stream: state.Recorder.stream\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators(\n    { on_connect, update_google, update_kaldi, stop_stream },\n    dispatch\n  )\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Websocket)\n","import React from 'react'\nimport Meter from './Meter'\nimport Cookies from 'universal-cookie'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport PropTypes from 'prop-types'\nimport Websocket from '../Websocket'\nimport { startRecord, stopRecord, updateStream } from '../../actions/Recorder'\n\nclass VolumeMeter extends React.Component {\n  constructor(props) {\n    super(props)\n    window.AudioContext = window.AudioContext || window.webkitAudioContext\n    this.state = {\n      audioContext: new AudioContext(),\n      src: null,\n      volume: 0,\n      threshold: 50,\n      stream: false\n    }\n    this.cookie = new Cookies()\n  }\n\n  componentDidMount() {\n    const { updateStream } = this.props\n    navigator.mediaDevices.getUserMedia({ audio: true }).then(stream => {\n      updateStream(stream)\n      this.setState(prevState => ({\n        src: prevState.audioContext.createMediaStreamSource(stream),\n        stream: stream\n      }))\n      this.setupAnalyser()\n    })\n    let threshold = this.cookie.get('threshold')\n    if (threshold !== undefined && Number(threshold)) {\n      this.setState({ threshold: Number(threshold) })\n    }\n  }\n\n  setupAnalyser() {\n    const { audioContext, src } = this.state\n    this.analyser = audioContext.createAnalyser()\n    src.connect(this.analyser)\n    this.array = new Uint8Array(this.analyser.frequencyBinCount)\n    setInterval(this.loop, 1000 / 10)\n  }\n\n  loop = () => {\n    this.analyser.getByteTimeDomainData(this.array)\n    var total = 0,\n      i = 0,\n      percentage,\n      float,\n      rms,\n      db\n    while (i < this.array.length) {\n      float = this.array[i++] / 0x80 - 1\n      total += float * float\n    }\n    rms = Math.sqrt(total / this.array.length)\n    db = 20 * Math.log10(rms)\n    db = Math.max(-48, Math.min(db, 0))\n    percentage = 100 + db * 2.083\n    this.setState({\n      volume: Number(percentage.toFixed(2))\n    })\n    const { startRecord, stopRecord, record, logined } = this.props\n    const { stream, threshold } = this.state\n    if (logined && stream && percentage >= threshold && !record) {\n      startRecord()\n    }\n    if (record && percentage < threshold) {\n      stopRecord()\n    }\n  }\n\n  handleMouse = () => {\n    document.addEventListener('mousemove', this.handleMouseMove, true)\n    document.addEventListener('mouseup', this.handleMouseUp, true)\n  }\n  handleMouseMove = event => {\n    let threshold\n    if (event.clientX < this.node.offsetLeft) {\n      threshold = 0\n    } else if (event.clientX > this.node.offsetWidth + this.node.offsetLeft) {\n      threshold = (this.node.offsetWidth / this.node.clientWidth) * 100\n    } else {\n      threshold =\n        ((event.clientX - this.node.offsetLeft) / this.node.clientWidth) * 100\n    }\n\n    this.setState({\n      threshold: threshold\n    })\n  }\n  handleMouseUp = event => {\n    document.removeEventListener('mousemove', this.handleMouseMove, true)\n    document.removeEventListener('mouseup', this.handleMouseUp, true)\n    let threshold\n    if (event.clientX < this.node.offsetLeft) {\n      threshold = 0\n    } else if (event.clientX > this.node.offsetWidth + this.node.offsetLeft) {\n      threshold = (this.node.offsetWidth / this.node.clientWidth) * 100\n    } else {\n      threshold =\n        ((event.clientX - this.node.offsetLeft) / this.node.clientWidth) * 100\n    }\n\n    this.setState({\n      threshold: threshold\n    })\n    this.cookie.set('threshold', threshold)\n  }\n\n  render() {\n    let { volume, threshold, stream } = this.state\n    let { logined } = this.props\n    return (\n      <div ref={node => (this.node = node)}>\n        <Meter\n          handleMouse={this.handleMouse}\n          threshold={threshold}\n          width={volume}\n        />\n        {logined && stream && <Websocket />}\n      </div>\n    )\n  }\n}\n\nVolumeMeter.propTypes = {\n  startRecord: PropTypes.func.isRequired,\n  stopRecord: PropTypes.func.isRequired,\n  updateStream: PropTypes.func.isRequired,\n  record: PropTypes.bool.isRequired,\n  logined: PropTypes.bool.isRequired\n}\n\nconst mapStateToProps = state => {\n  return {\n    record: state.Recorder.record,\n    logined: state.LoginManager.logined\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators(\n    {\n      startRecord,\n      stopRecord,\n      updateStream\n    },\n    dispatch\n  )\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(VolumeMeter)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { withStyles } from '@material-ui/core/styles'\nimport Button from '@material-ui/core/Button'\nimport Mic from '@material-ui/icons/Mic'\nimport Stop from '@material-ui/icons/Stop'\nimport MediaStreamRecorder from 'msr'\nimport { connect } from 'react-redux'\n\nconst styles = theme => ({\n  button: {\n    margin: theme.spacing.unit,\n    float: 'right'\n  },\n  record: {\n    margin: '10px 0px'\n  }\n})\n\nclass Record extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      record: false,\n      ready: false\n    }\n  }\n\n  componentDidMount = () => {\n    const { stream } = this.props\n    this.recorder = new MediaStreamRecorder(stream)\n    this.recorder.mimeType = 'audio/wav'\n    this.recorder.audioChannels = 1\n    this.recorder.ondataavailable = blob => {\n      this.props.handleURL(blob)\n    }\n    this.setState({ ready: true })\n  }\n  startRecording = () => {\n    this.setState({\n      record: true\n    })\n    this.recorder.start(100000)\n  }\n\n  stopRecording = () => {\n    this.setState({\n      record: false\n    })\n    this.recorder.stop()\n  }\n\n  render() {\n    const { classes } = this.props\n    return (\n      <div className={classes.record}>\n        <Button\n          className={classes.button}\n          variant=\"fab\"\n          color=\"secondary\"\n          onClick={this.state.record ? this.stopRecording : this.startRecording}\n          type=\"button\"\n          disabled={!this.state.ready}>\n          {this.state.record ? <Stop /> : <Mic />}\n        </Button>\n      </div>\n    )\n  }\n}\n\nRecord.propTypes = {\n  classes: PropTypes.object.isRequired,\n  handleURL: PropTypes.func.isRequired,\n  stream: PropTypes.object.isRequired\n}\n\nconst mapStateToProps = state => {\n  return {\n    stream: state.Recorder.stream\n  }\n}\n\nexport default connect(mapStateToProps)(withStyles(styles)(Record))\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport Button from '@material-ui/core/Button'\nimport Dialog from '@material-ui/core/Dialog'\nimport DialogContent from '@material-ui/core/DialogContent'\nimport DialogContentText from '@material-ui/core/DialogContentText'\nimport DialogTitle from '@material-ui/core/DialogTitle'\nimport PlayArrow from '@material-ui/icons/PlayArrow'\nimport { withStyles } from '@material-ui/core/styles'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport AppBar from '@material-ui/core/AppBar'\nimport Toolbar from '@material-ui/core/Toolbar'\nimport IconButton from '@material-ui/core/IconButton'\nimport Typography from '@material-ui/core/Typography'\nimport CloseIcon from '@material-ui/icons/Close'\nimport green from '@material-ui/core/colors/green'\nimport CircularProgress from '@material-ui/core/CircularProgress'\nimport Slide from '@material-ui/core/Slide'\nimport { connect } from 'react-redux'\nimport { toast } from 'react-toastify'\nimport axios from 'axios'\nimport MobileStepper from '@material-ui/core/MobileStepper'\n\nimport Record from './Record'\n\nconst styles = theme => ({\n  dots: {\n    backgroundColor: 'inherit'\n  },\n  button: {\n    margin: theme.spacing.unit,\n    float: 'right'\n  },\n  buttonProgress: {\n    color: green[500],\n    position: 'absolute',\n    top: '50%',\n    left: '50%',\n    marginTop: -12,\n    marginLeft: -12\n  },\n  appBar: {\n    position: 'relative'\n  },\n  flex: {\n    flex: 1\n  }\n})\n\nfunction Transition(props) {\n  return <Slide direction=\"up\" {...props} />\n}\n\nexport class RegisterSpeaker extends React.Component {\n  state = {\n    open: false,\n    sentences: [],\n    audioBlob: {},\n    audio: [],\n    step: 0,\n    loading: false\n  }\n\n  handleClick = () => {\n    this.generateSentences()\n    this.setState({ open: true })\n  }\n\n  handleClose = () => {\n    const { callback } = this.props\n    this.setState({ open: false })\n    callback()\n  }\n\n  handleBack = () => {\n    if (this.state.step > 0) {\n      this.setState(prevState => ({ step: prevState.step - 1 }))\n    } else {\n      this.handleClose()\n    }\n  }\n\n  handleNext = () => {\n    if (this.state.step < 9) {\n      this.setState(prevState => ({ step: prevState.step + 1 }))\n    } else {\n      const { hostname } = this.props\n      this.setState({ loading: true })\n      var fd = new FormData()\n      // eslint-disable-next-line\n      for(let i = 0; i < 10; i++){\n        fd.append(`file${i + 1}`, this.state.audioBlob[i], `file${i + 1}.wav`)\n      }\n      axios\n        .post(`${hostname}/registerspeaker`, fd, {\n          headers: {\n            'Content-Type': 'multipart/form-data'\n          }\n        })\n        .then(() => {\n          toast.success('語者註冊成功')\n          this.handleClose()\n        })\n        .catch(() => {\n          toast.error('語者註冊失敗，請重新傳送一遍')\n          this.setState({ loading: false })\n        })\n    }\n  }\n\n  handleURL = blob => {\n    let obj = {}\n    obj[this.state.step] = blob\n\n    this.setState(prevState => ({\n      audioBlob: Object.assign({}, prevState.audioBlob, obj)\n    }))\n  }\n\n  replayBlob = () => {\n    var blobURL = window.URL.createObjectURL(\n      this.state.audioBlob[this.state.step]\n    )\n    var audio0 = new Audio(blobURL)\n    audio0.play()\n  }\n\n  generateSentences = () => {\n    const { hostname } = this.props\n    axios\n      .get(`${hostname}/sentences.json`)\n      .then(res => res.data)\n      .then(({ sentences }) => {\n        this.setState({ sentences: sentences })\n      })\n      .catch(() => {\n        toast.error('取得語料失敗，請檢查登入是否過期')\n        this.handleClose()\n      })\n  }\n\n  render() {\n    const { classes, hasivector } = this.props\n    const { loading, step, sentences, audioBlob, open } = this.state\n    return (\n      <div>\n        <MenuItem onClick={this.handleClick}>\n          <p>{hasivector ? '重新註冊語者' : '語者設定'}</p>\n        </MenuItem>\n        <Dialog\n          fullScreen\n          open={open}\n          onClose={this.handleClose}\n          TransitionComponent={Transition}>\n          <AppBar className={classes.appBar}>\n            <Toolbar>\n              <IconButton\n                color=\"inherit\"\n                onClick={this.handleClose}\n                aria-label=\"Close\">\n                <CloseIcon />\n              </IconButton>\n              <Typography variant=\"h6\" color=\"inherit\" className={classes.flex}>\n                語者設定\n              </Typography>\n              <MobileStepper\n                className={classes.dots}\n                variant=\"dots\"\n                steps={10}\n                position=\"static\"\n                activeStep={step}\n                backButton={\n                  <Button onClick={this.handleBack} color=\"inherit\">\n                    Back\n                  </Button>\n                }\n                nextButton={\n                  <Button\n                    onClick={this.handleNext}\n                    color=\"inherit\"\n                    autoFocus\n                    disabled={!audioBlob[step] || loading}>\n                    {step === 9 ? 'Finish' : 'Next'}\n                    {loading && (\n                      <CircularProgress\n                        size={24}\n                        className={classes.buttonProgress}\n                      />\n                    )}\n                  </Button>\n                }\n              />\n            </Toolbar>\n          </AppBar>\n          <DialogTitle id=\"responsive-dialog-title\">\n            {'請朗讀下列文字進行語者註冊'}\n          </DialogTitle>\n          <DialogContent>\n            <DialogContentText id=\"sentences\">\n              {sentences[step]}\n            </DialogContentText>\n            <Record handleURL={this.handleURL} />\n            <Button\n              disabled={!audioBlob[step]}\n              className={classes.button}\n              variant=\"fab\"\n              color=\"secondary\"\n              type=\"button\"\n              onClick={this.replayBlob}>\n              <PlayArrow />\n            </Button>\n          </DialogContent>\n        </Dialog>\n      </div>\n    )\n  }\n}\n\nRegisterSpeaker.propTypes = {\n  classes: PropTypes.object.isRequired,\n  callback: PropTypes.func.isRequired,\n  hasivector: PropTypes.bool.isRequired,\n  hostname: PropTypes.string.isRequired\n}\nconst mapStateToProps = state => {\n  return {\n    hasivector: state.LoginManager.hasivector,\n    hostname: state.Host.hostname\n  }\n}\n\nexport default connect(mapStateToProps)(withStyles(styles)(RegisterSpeaker))\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport AppBar from '@material-ui/core/AppBar'\nimport Toolbar from '@material-ui/core/Toolbar'\nimport IconButton from '@material-ui/core/IconButton'\nimport Typography from '@material-ui/core/Typography'\nimport InputBase from '@material-ui/core/InputBase'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport Menu from '@material-ui/core/Menu'\nimport { fade } from '@material-ui/core/styles/colorManipulator'\nimport { withStyles } from '@material-ui/core/styles'\nimport MenuIcon from '@material-ui/icons/Menu'\nimport SearchIcon from '@material-ui/icons/Search'\nimport AccountCircle from '@material-ui/icons/AccountCircle'\nimport Avatar from '@material-ui/core/Avatar'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport { toast } from 'react-toastify'\n\nimport FacebookLogin from 'react-facebook-login/dist/facebook-login-render-props'\nimport { login, logout } from '../../actions'\nimport RegisterSpeaker from './RegisterSpeaker'\nimport axios from 'axios'\n\naxios.defaults.withCredentials = true\n\nconst styles = theme => ({\n  root: {\n    width: '100%'\n  },\n  grow: {\n    flexGrow: 1\n  },\n  menuButton: {\n    marginLeft: -12,\n    marginRight: 20\n  },\n  title: {\n    display: 'none',\n    [theme.breakpoints.up('sm')]: {\n      display: 'block'\n    }\n  },\n  search: {\n    position: 'relative',\n    borderRadius: theme.shape.borderRadius,\n    backgroundColor: fade(theme.palette.common.white, 0.15),\n    '&:hover': {\n      backgroundColor: fade(theme.palette.common.white, 0.25)\n    },\n    marginRight: theme.spacing.unit * 2,\n    marginLeft: 0,\n    width: '100%',\n    [theme.breakpoints.up('sm')]: {\n      marginLeft: theme.spacing.unit * 3,\n      width: 'auto'\n    }\n  },\n  searchIcon: {\n    width: theme.spacing.unit * 9,\n    height: '100%',\n    position: 'absolute',\n    pointerEvents: 'none',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  inputRoot: {\n    color: 'inherit',\n    width: '100%'\n  },\n  inputInput: {\n    paddingTop: theme.spacing.unit,\n    paddingRight: theme.spacing.unit,\n    paddingBottom: theme.spacing.unit,\n    paddingLeft: theme.spacing.unit * 10,\n    transition: theme.transitions.create('width'),\n    width: '100%',\n    [theme.breakpoints.up('md')]: {\n      width: 200\n    }\n  },\n  sectionDesktop: {\n    display: 'none',\n    [theme.breakpoints.up('md')]: {\n      display: 'flex'\n    }\n  },\n  sectionMobile: {\n    display: 'flex',\n    [theme.breakpoints.up('md')]: {\n      display: 'none'\n    }\n  }\n})\n\nclass PrimarySearchAppBar extends React.Component {\n  state = {\n    anchorEl: null\n  }\n\n  constructor(props) {\n    super(props)\n    const { hostname, login } = this.props\n    axios\n      .get(`${hostname}/auth`)\n      .then(res => res.data)\n      .then(data => {\n        login(data)\n        console.log('Auth success')\n      })\n      .catch(() => {\n        console.log('Auth failed')\n      })\n  }\n\n  handleProfileMenuOpen = event => {\n    this.setState({ anchorEl: event.currentTarget })\n  }\n\n  handleMenuClose = () => {\n    this.setState({ anchorEl: null })\n  }\n\n  handleLogin = res => {\n    const { hostname, login } = this.props\n    axios\n      .post(\n        `${hostname}/login`,\n        {\n          email: res.email,\n          name: res.name,\n          token: res.accessToken,\n          signed: res.signedRequest,\n          fbid: Number(res.id)\n        },\n        {\n          headers: {\n            'Content-Type': 'application/x-www-form-urlencoded'\n          }\n        }\n      )\n      .then(res => res.data)\n      .then(data => {\n        login(data)\n        toast.success('Login success', {\n          position: toast.POSITION.BOTTOM_RIGHT\n        })\n      })\n      .catch(() =>\n        toast.error('Login failed', {\n          position: toast.POSITION.BOTTOM_RIGHT\n        })\n      )\n      .finally(() => {\n        this.handleMenuClose()\n      })\n  }\n\n  handleLogout = () => {\n    const { logout, hostname } = this.props\n    axios.get(`${hostname}/logout`)\n    logout()\n    toast.warn('Logout success', { position: toast.POSITION.BOTTOM_RIGHT })\n    this.handleMenuClose()\n  }\n\n  render() {\n    const { anchorEl } = this.state\n    const { classes, logined, stream, user } = this.props\n    const isMenuOpen = Boolean(anchorEl)\n\n    const renderMenu = (\n      <Menu\n        anchorEl={anchorEl}\n        anchorOrigin={{ vertical: 'top', horizontal: 'right' }}\n        transformOrigin={{ vertical: 'top', horizontal: 'right' }}\n        open={isMenuOpen}\n        onClose={this.handleMenuClose}>\n        {logined ? (\n          <MenuItem onClick={this.handleLogout}>Logout</MenuItem>\n        ) : (\n          <FacebookLogin\n            appId=\"332358063993706\"\n            fields=\"name,email,picture\"\n            disableMobileRedirect={true}\n            callback={this.handleLogin}\n            render={renderProps => (\n              <MenuItem onClick={renderProps.onClick}>Facebook Login</MenuItem>\n            )}\n          />\n        )}\n        {logined && <RegisterSpeaker callback={this.handleMenuClose} />}\n      </Menu>\n    )\n\n    return (\n      <div className={classes.root}>\n        <AppBar position=\"static\">\n          <Toolbar>\n            <IconButton\n              className={classes.menuButton}\n              color=\"inherit\"\n              aria-label=\"Open drawer\">\n              <MenuIcon />\n            </IconButton>\n            <Typography\n              className={classes.title}\n              variant=\"h6\"\n              color=\"inherit\"\n              noWrap>\n              具語者辨識之語音助理\n            </Typography>\n            <div className={classes.search}>\n              <div className={classes.searchIcon}>\n                <SearchIcon />\n              </div>\n              <InputBase\n                placeholder=\"Search…\"\n                classes={{\n                  root: classes.inputRoot,\n                  input: classes.inputInput\n                }}\n              />\n            </div>\n            <div className={classes.grow} />\n            <div className={classes.sectionDesktop}>\n              <IconButton\n                aria-owns={isMenuOpen ? 'material-appbar' : null}\n                aria-haspopup=\"true\"\n                onClick={this.handleProfileMenuOpen}\n                color=\"inherit\">\n                {user.fbid ? (\n                  <Avatar\n                    alt={user.name}\n                    src={`https://graph.facebook.com/${\n                      user.fbid\n                    }/picture?type=normal`}\n                  />\n                ) : (\n                  <AccountCircle />\n                )}\n              </IconButton>\n            </div>\n            <div className={classes.sectionMobile}>\n              <IconButton\n                aria-owns={isMenuOpen ? 'material-appbar' : null}\n                aria-haspopup=\"true\"\n                onClick={this.handleProfileMenuOpen}\n                color=\"inherit\">\n                {user.fbid ? (\n                  <Avatar\n                    alt={user.name}\n                    src={`https://graph.facebook.com/${\n                      user.fbid\n                    }/picture?type=normal`}\n                  />\n                ) : (\n                  <AccountCircle />\n                )}\n              </IconButton>\n            </div>\n          </Toolbar>\n        </AppBar>\n        {stream && renderMenu}\n      </div>\n    )\n  }\n}\n\nPrimarySearchAppBar.propTypes = {\n  classes: PropTypes.object.isRequired,\n  logined: PropTypes.bool.isRequired,\n  user: PropTypes.object.isRequired,\n  hostname: PropTypes.string.isRequired,\n  login: PropTypes.func.isRequired,\n  logout: PropTypes.func.isRequired,\n  stream: PropTypes.object\n}\n\nconst mapStateToProps = state => {\n  return {\n    logined: state.LoginManager.logined,\n    hostname: state.Host.hostname,\n    user: state.LoginManager,\n    stream: state.Recorder.stream\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators(\n    {\n      login,\n      logout\n    },\n    dispatch\n  )\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(withStyles(styles)(PrimarySearchAppBar))\n","import React from 'react'\nimport styled from 'styled-components'\n\nconst FooterP = styled.p`\n  margin: 0px;\n  margin-bottom: 10px;\n`\n\nclass Footer extends React.Component {\n  render() {\n    return (\n      <footer>\n        <FooterP>© YunTech 2018</FooterP>\n      </footer>\n    )\n  }\n}\n\nexport default Footer\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { withStyles } from '@material-ui/core/styles'\nimport classNames from 'classnames'\nimport InputAdornment from '@material-ui/core/InputAdornment'\nimport TextField from '@material-ui/core/TextField'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport Divider from '@material-ui/core/Divider'\n\nconst styles = theme => ({\n  flex: {\n    display: 'flex',\n    flexWrap: 'wrap'\n  },\n  flexRight: {\n    display: 'flex'\n  },\n  clear: {\n    clear: 'both'\n  },\n  margin: {\n    margin: theme.spacing.unit,\n    width: '80%',\n    [theme.breakpoints.up('md')]: {\n      width: '40%'\n    }\n  },\n  marginLeft: {\n    'margin-left': 'auto'\n  },\n  k_margin: {\n    'margin-left': '3px',\n    'margin-right': '3px'\n  }\n})\n\nfunction Response(props) {\n  const { classes, google, kaldi, proba, result } = props\n  return (\n    <div>\n      {google && (\n        <div className={classes.flex}>\n          <TextField\n            className={classes.margin}\n            label=\"Google\"\n            defaultValue={google}\n            variant=\"outlined\"\n            multiline\n            InputProps={{\n              startAdornment: (\n                <InputAdornment position=\"start\">\n                  <FontAwesomeIcon icon={['fab', 'google']} />\n                </InputAdornment>\n              ),\n              readOnly: true\n            }}\n          />\n        </div>\n      )}\n      {kaldi && (\n        <div className={classes.flex}>\n          <TextField\n            className={classes.margin}\n            label=\"Kaldi\"\n            defaultValue={kaldi}\n            multiline\n            variant=\"outlined\"\n            InputProps={{\n              startAdornment: (\n                <InputAdornment position=\"start\">\n                  <FontAwesomeIcon\n                    className={classes.k_margin}\n                    icon={['fab', 'kaggle']}\n                  />\n                </InputAdornment>\n              ),\n              readOnly: true\n            }}\n          />\n        </div>\n      )}\n      {result && (\n        <div className={classes.flexRight}>\n          <TextField\n            className={classNames(classes.margin, classes.marginLeft)}\n            label={`The probability: ${proba}`}\n            defaultValue={result}\n            multiline\n            variant=\"outlined\"\n            InputProps={{\n              startAdornment: (\n                <InputAdornment position=\"start\">\n                  <FontAwesomeIcon icon={['fas', 'robot']} />\n                </InputAdornment>\n              ),\n              readOnly: true\n            }}\n          />\n        </div>\n      )}\n      {result && <Divider className={classes.clear} />}\n    </div>\n  )\n}\n\nResponse.propTypes = {\n  classes: PropTypes.object.isRequired,\n  google: PropTypes.string.isRequired,\n  kaldi: PropTypes.string.isRequired,\n  proba: PropTypes.number,\n  result: PropTypes.string\n}\n\nexport default withStyles(styles)(Response)\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\nimport Response from './Response'\n\nconst TextArea = styled.div`\n  width: 100%;\n  height: calc(100vh - 132px);\n  overflow: scroll;\n  overflow-x: hidden;\n  border-radius: 10px;\n  background: #eee;\n`\n\nclass AppTextArea extends Component {\n  render() {\n    const { google, kaldi, responses } = this.props\n    let responseItem = []\n    for (let i = 0; i < responses.length; i++) {\n      responseItem.push(<Response key={i} {...responses[i]} />)\n    }\n    return (\n      <TextArea>\n        {responseItem}\n        <Response google={google} kaldi={kaldi} proba={0} result={''} />\n      </TextArea>\n    )\n  }\n}\n\nAppTextArea.propTypes = {\n  google: PropTypes.string.isRequired,\n  kaldi: PropTypes.string.isRequired,\n  responses: PropTypes.array.isRequired\n}\n\nconst mapStateToProps = state => {\n  return {\n    google: state.Websocket.google,\n    kaldi: state.Websocket.kaldi,\n    responses: state.Websocket.responses\n  }\n}\n\nexport default connect(mapStateToProps)(AppTextArea)\n","import React, { Component } from 'react'\nimport styled from 'styled-components'\nimport VolumeMeter from '../VolumeMeter'\nimport MenuAppBar from '../MenuAppBar'\nimport Footer from '../Footer'\nimport AppTextArea from '../AppTextArea'\nimport { ToastContainer } from 'react-toastify'\nimport 'react-toastify/dist/ReactToastify.css'\n\nconst AppWrapper = styled.div`\n  text-align: center;\n  margin: 0px auto;\n`\n\nclass App extends Component {\n  render() {\n    return (\n      <AppWrapper id=\"app\">\n        <MenuAppBar />\n        <AppTextArea />\n        <VolumeMeter />\n        <Footer />\n        <ToastContainer />\n      </AppWrapper>\n    )\n  }\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { Provider } from 'react-redux'\nimport { createStore } from 'redux'\nimport './index.css'\nimport registerServiceWorker from './registerServiceWorker'\nimport reducers from './reducers'\nimport App from './components/App/'\nimport { BrowserRouter } from 'react-router-dom'\nimport { MuiThemeProvider, createMuiTheme } from '@material-ui/core/styles'\nimport { library } from '@fortawesome/fontawesome-svg-core'\nimport { fab } from '@fortawesome/free-brands-svg-icons'\nimport { fas } from '@fortawesome/free-solid-svg-icons'\n\nlibrary.add(fab, fas)\n\nconst theme = createMuiTheme({\n  typography: {\n    useNextVariants: true\n  }\n})\n\nlet store = createStore(\n  reducers,\n  window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\n)\n\nReactDOM.render(\n  <Provider store={store}>\n    <MuiThemeProvider theme={theme}>\n      <BrowserRouter>\n        <App />\n      </BrowserRouter>\n    </MuiThemeProvider>\n  </Provider>,\n  document.getElementById('root')\n)\nregisterServiceWorker()\n","const Websocket = (\n  state = { connected: false, responses: [], google: '', kaldi: '' },\n  action\n) => {\n  switch (action.type) {\n    case 'ON_CONNECT':\n      return {\n        ...state,\n        connected: true\n      }\n    case 'TRANSCRIPT_GOOGLE':\n      return {\n        ...state,\n        google: action.transcript_google\n      }\n    case 'TRANSCRIPT_KALDI':\n      return {\n        ...state,\n        kaldi: action.transcript_kaldi\n      }\n    case 'STOP_STREAM':\n      state.responses.push({\n        google: state.google,\n        kaldi: state.kaldi,\n        proba: action.proba,\n        result: action.result\n      })\n      return {\n        ...state,\n        google: '',\n        kaldi: ''\n      }\n    default:\n      return state\n  }\n}\n\nexport default Websocket\n","const Recorder = (state = { record: false }, action) => {\n  switch (action.type) {\n    case 'UPDATE_STREAM':\n      return Object.assign({}, state, { stream: action.stream })\n    case 'START_RECORD':\n      return Object.assign({}, state, { record: true })\n    case 'STOP_RECORD':\n      return Object.assign({}, state, { record: false })\n\n    default:\n      return state\n  }\n}\n\nexport default Recorder\n","const LoginManager = (state = { logined: false }, action) => {\n  switch (action.type) {\n    case 'LOGIN':\n      return {\n        fbid: action.fbid,\n        email: action.email,\n        name: action.name,\n        logined: true,\n        hasivector: action.hasivector\n      }\n    case 'LOGOUT':\n      return { logined: false }\n\n    default:\n      return state\n  }\n}\n\nexport default LoginManager\n","const Host = (state = { hostname: 'https://vawsr.mino.tw' }, action) => {\n  switch (action.type) {\n    case 'CHANGE_HOST':\n      return Object.assign({}, state, { hostname: action.hostname })\n    default:\n      return state\n  }\n}\n\nexport default Host\n","const files = require.context('.', false, /\\.js$/)\nconst modules = {}\n\nfiles.keys().forEach(key => {\n  if (key.match(/\\.\\/index.*js/)) return\n  Object.assign(modules, files(key))\n})\n\nmodule.exports = modules\n","export const login = user => {\n  return {\n    type: 'LOGIN',\n    fbid: user.fbid,\n    email: user.email,\n    name: user.name,\n    hasivector: user.hasivector\n  }\n}\n\nexport const logout = () => {\n  return {\n    type: 'LOGOUT'\n  }\n}\n"],"sourceRoot":""}