{"version":3,"sources":["reducers/modules/index.js","reducers/modules sync nonrecursive //.js$","reducers/modules/Host.test.js","reducers/modules/LoginManager.test.js","reducers/modules/Recorder.test.js","reducers/modules/Websocket.test.js","reducers/modules/Recorder.js","reducers/modules/Websocket.js","registerServiceWorker.js","reducers/index.js","components/VolumeMeter/Meter/index.js","actions/Websocket.js","components/Websocket/index.js","actions/Recorder.js","components/VolumeMeter/index.js","actions/LoginManager.js","components/MenuAppBar/RegisterSpeaker/Record/index.js","components/MenuAppBar/RegisterSpeaker/index.js","components/MenuAppBar/index.js","components/Footer/index.js","components/AppTextArea/Response/index.js","components/AppTextArea/index.js","components/App/index.js","index.js","reducers/modules/LoginManager.js","reducers/modules/Host.js"],"names":["__webpack_require__","r","__webpack_exports__","files","require","modules","keys","forEach","key","match","replace","default","map","./Host.js","./Host.test.js","./LoginManager.js","./LoginManager.test.js","./Recorder.js","./Recorder.test.js","./Websocket.js","./Websocket.test.js","./index.js","webpackContext","req","id","webpackContextResolve","e","Error","code","Object","resolve","module","exports","_Host__WEBPACK_IMPORTED_MODULE_0__","describe","it","expect","Host","undefined","toEqual","hostname","type","initialState","logined","hasivector","processing","LoginManager","action","fbid","email","name","assign","_home_travis_build_Sean2525_VAWSR_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","stream","test","record","suspended","Recorder","connected","responses","google","kaldi","Websocket","transcript_google","transcript_kaldi","result","text","url","expectedState","proba","state","arguments","length","push","isLocalhost","Boolean","window","location","registerValidSW","swUrl","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","console","log","catch","error","combineReducers","Slider","styled","div","_templateObject","Bar","_templateObject2","BarFill","_templateObject3","Track","_templateObject4","Grabber","_templateObject5","Meter","_this$props","this","props","width","threshold","handleMouse","react_default","a","createElement","style","background","position","top","onMouseDown","left","React","Component","on_connect","update_google","update_kaldi","stop_stream","_ref","clear_responses","context","AudioContext","componentDidMount","_this","socket","processor","createScriptProcessor","sampleRate","connect","destination","input","createMediaStreamSource","onaudioprocess","microphoneProcess","registerEvents","componentDidUpdate","prevProps","stopRecording","on","transcript","_ref2","tify","_ref3","emit","left16","inputBuffer","getChannelData","downsampleBuffer","convertoFloat32ToInt16","buffer","l","buf","Int16Array","outSampleRate","sampleRateRatio","newLength","Math","round","offsetResult","offsetBuffer","nextOffsetBuffer","accum","count","i","min","dispatch","bindActionCreators","startRecord","stopRecord","updateStream","resume","suspend","VolumeMeter","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","loop","_this$state","stopTimeout","analyser","getByteTimeDomainData","array","percentage","float","rms","db","total","sqrt","log10","max","setState","volume","Number","toFixed","prevState","document","addEventListener","handleMouseMove","handleMouseUp","event","clientX","node","offsetLeft","offsetWidth","clientWidth","removeEventListener","cookie","set","webkitAudioContext","audioContext","src","Cookies","_this2","mediaDevices","getUserMedia","audio","setupAnalyser","get","_this$state2","createAnalyser","Uint8Array","frequencyBinCount","setInterval","_this3","_this$state3","ref","VolumeMeter_Meter","components_Websocket","login","user","logout","update_status","Record","recorder","MediaStreamRecorder","mimeType","audioChannels","bufferSize","ondataavailable","blob","handleURL","ready","startRecording","start","stop","classes","className","Button_default","button","variant","color","onClick","disabled","Stop_default","Mic_default","withStyles","theme","margin","spacing","unit","Transition","Slide_default","direction","RegisterSpeaker","_React$Component","_getPrototypeOf2","_len","args","Array","_key","apply","concat","open","sentences","audioBlob","step","loading","handleClick","generateSentences","handleClose","callback","handleBack","handleNext","_this$props2","fd","FormData","append","axios","post","headers","Content-Type","res","data","message","toast","success","err","response","obj","replayBlob","blobURL","URL","createObjectURL","Audio","play","inherits","createClass","value","_this$props3","MenuItem_default","Dialog_default","fullScreen","onClose","TransitionComponent","AppBar_default","appBar","Toolbar_default","IconButton_default","aria-label","Close_default","Typography_default","flex","MobileStepper_default","dots","steps","activeStep","backButton","nextButton","autoFocus","CircularProgress_default","size","buttonProgress","DialogTitle_default","DialogContent_default","DialogContentText_default","RegisterSpeaker_Record","PlayArrow_default","backgroundColor","green","marginTop","marginLeft","defaults","withCredentials","PrimarySearchAppBar","anchorEl","anchorEl2","handleProfileMenuOpen","currentTarget","handleProfileMenuOpen2","handleMenuClose","handleLogin","token","accessToken","signed","signedRequest","POSITION","BOTTOM_RIGHT","finally","handleLogout","warn","handleClearResponses","_this$props4","isMenuOpen","isMenuOpen2","renderMenu","Menu_default","anchorOrigin","vertical","horizontal","transformOrigin","facebook_login_render_props_default","appId","fields","disableMobileRedirect","render","renderProps","MenuAppBar_RegisterSpeaker","renderMenu2","root","aria-owns","aria-haspopup","menuButton","icons_Menu_default","title","noWrap","grow","sectionDesktop","Avatar_default","alt","AccountCircle_default","sectionMobile","flexGrow","marginRight","display","defineProperty","breakpoints","up","FooterP","p","Footer_templateObject","Footer","Response","TextField_default","label","defaultValue","multiline","InputProps","startAdornment","InputAdornment_default","index_es","icon","readOnly","k_margin","flexRight","classNames","Divider_default","clear","flexWrap","margin-left","margin-right","TextArea","AppTextArea_templateObject","AppTextArea","toConsumableArray","responsesItem","AppTextArea_Response","el","scrollTop","scrollTopMax","scrollToBottom","innerRef","AppWrapper","App_templateObject","App","MenuAppBar","components_AppTextArea","components_VolumeMeter","components_Footer","react_toastify_lib","library","add","fab","fas","createMuiTheme","typography","useNextVariants","store","createStore","reducers","__REDUX_DEVTOOLS_EXTENSION__","ReactDOM","es","core_styles","BrowserRouter","components_App","getElementById","process","origin","fetch","status","indexOf","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.cd2faba6.chunk.js","sourcesContent":["const files = require.context('.', false, /\\.js$/)\nconst modules = {}\n\nfiles.keys().forEach(key => {\n  if (key.match(/\\.\\/index\\.js|.*\\.test\\.js/)) return\n  modules[key.replace(/(\\.\\/|\\.js)/g, '')] = files(key).default\n})\n\nexport default modules\n","var map = {\n\t\"./Host.js\": 77,\n\t\"./Host.test.js\": 201,\n\t\"./LoginManager.js\": 59,\n\t\"./LoginManager.test.js\": 202,\n\t\"./Recorder.js\": 35,\n\t\"./Recorder.test.js\": 203,\n\t\"./Websocket.js\": 36,\n\t\"./Websocket.test.js\": 204,\n\t\"./index.js\": 103\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) { // check for number or string\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn id;\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 200;","import Host from './Host'\n\ndescribe('Host reducer', () => {\n  it('should retrun inital state', () => {\n    const initialState = { hostname: 'https://vawsr.mino.tw' }\n    expect(Host(undefined, {})).toEqual(initialState)\n  })\n\n  it('should handle CHANGE_HOST', () => {\n    const action = {\n      type: 'CHANGE_HOST',\n      hostname: 'https://test'\n    }\n    expect(Host(undefined, action)).toEqual({\n      hostname: 'https://test'\n    })\n  })\n})\n","import LoginManager from './LoginManager'\n\ndescribe('LoginManager reducer', () => {\n  const initialState = {\n    logined: false,\n    hasivector: false,\n    processing: false\n  }\n  it('should retrun inital state', () => {\n    expect(LoginManager(undefined, {})).toEqual(initialState)\n  })\n\n  it('should handle LOGIN', () => {\n    const action = {\n      fbid: 1,\n      email: 'test',\n      name: 'test',\n      hasivector: false,\n      processing: false\n    }\n    expect(\n      LoginManager(undefined, Object.assign({ type: 'LOGIN' }, action))\n    ).toEqual({\n      logined: true,\n      ...action\n    })\n  })\n\n  it('should handle LOGOUT', () => {\n    expect(LoginManager({ logined: true }, { type: 'LOGOUT' })).toEqual({\n      logined: false,\n      hasivector: false,\n      processing: false\n    })\n  })\n})\n","import Recorder from './Recorder'\n\ndescribe('Recorder reducer', () => {\n  const stream = { test: 'test' }\n  let initialState = { record: false, suspended: false }\n  it('should retrun inital state', () => {\n    expect(Recorder(undefined, {})).toEqual(initialState)\n  })\n\n  it('should handle UPDATE_STREAM', () => {\n    expect(Recorder(undefined, { type: 'UPDATE_STREAM', stream })).toEqual({\n      ...initialState,\n      stream\n    })\n  })\n\n  it('should handle START_RECORD', () => {\n    expect(\n      Recorder({ stream, ...initialState }, { type: 'START_RECORD' })\n    ).toEqual({\n      ...initialState,\n      record: true,\n      stream\n    })\n  })\n\n  it('should handle STOP_RECORD', () => {\n    expect(\n      Recorder({ stream, ...initialState }, { type: 'STOP_RECORD' })\n    ).toEqual({\n      ...initialState,\n      record: false,\n      stream\n    })\n  })\n\n  it('should handle SUSPEND_VOLUMEMETER', () => {\n    expect(Recorder(undefined, { type: 'SUSPEND_VOLUMEMETER' })).toEqual({\n      ...initialState,\n      suspended: true\n    })\n  })\n\n  it('should handle RESUME_VOLUMEMETER', () => {\n    expect(\n      Recorder(\n        { ...initialState, suspended: true },\n        {\n          type: 'RESUME_VOLUMEMETER'\n        }\n      )\n    ).toEqual({ ...initialState })\n  })\n})\n","import Websocket from './Websocket'\n\ndescribe('Websocket reducer', () => {\n  const initialState = {\n    connected: false,\n    responses: [],\n    google: '',\n    kaldi: ''\n  }\n  it('should return the initial state', () => {\n    expect(Websocket(undefined, {})).toEqual(initialState)\n  })\n\n  it('should handle ON_CONNECT', () => {\n    expect(\n      Websocket(undefined, {\n        type: 'ON_CONNECT'\n      })\n    ).toEqual({ ...initialState, connected: true })\n  })\n\n  it('should handle TRANSCRIPT_GOOGLE', () => {\n    expect(\n      Websocket(undefined, {\n        type: 'TRANSCRIPT_GOOGLE',\n        transcript_google: 'test'\n      })\n    ).toEqual({ ...initialState, google: 'test' })\n  })\n\n  it('should handle TRANSCRIPT_KALDI', () => {\n    expect(\n      Websocket(undefined, {\n        type: 'TRANSCRIPT_KALDI',\n        transcript_kaldi: 'test'\n      })\n    ).toEqual({ ...initialState, kaldi: 'test' })\n  })\n\n  it('should handle STOP_STREAM', () => {\n    const proba = 0.8\n    const google = 'google'\n    const kaldi = 'kaldi'\n    const result = {\n      text: '123',\n      url: '456'\n    }\n    const expectedState = {\n      ...initialState,\n      responses: [{ google, kaldi, proba, ...result }]\n    }\n    expect(\n      Websocket(undefined, {\n        type: 'STOP_STREAM',\n        google,\n        kaldi,\n        proba,\n        ...result\n      })\n    ).toEqual(expectedState)\n  })\n\n  it('should handle CLEAR_RESPONSES', () => {\n    expect(\n      Websocket(\n        { ...initialState, responses: [1, 2] },\n        {\n          type: 'CLEAR_RESPONSES'\n        }\n      )\n    ).toEqual(initialState)\n  })\n})\n","const Recorder = (state = { record: false, suspended: false }, action) => {\n  switch (action.type) {\n    case 'UPDATE_STREAM':\n      return { ...state, stream: action.stream }\n    case 'START_RECORD':\n      return { ...state, record: true }\n    case 'STOP_RECORD':\n      return { ...state, record: false }\n    case 'SUSPEND_VOLUMEMETER':\n      return { ...state, suspended: true }\n    case 'RESUME_VOLUMEMETER':\n      return { ...state, suspended: false }\n    default:\n      return state\n  }\n}\n\nexport default Recorder\n","const Websocket = (\n  state = { connected: false, responses: [], google: '', kaldi: '' },\n  action\n) => {\n  switch (action.type) {\n    case 'ON_CONNECT':\n      return {\n        ...state,\n        connected: true\n      }\n    case 'TRANSCRIPT_GOOGLE':\n      return {\n        ...state,\n        google: action.transcript_google\n      }\n    case 'TRANSCRIPT_KALDI':\n      return {\n        ...state,\n        kaldi: action.transcript_kaldi\n      }\n    case 'STOP_STREAM':\n      state.responses.push({\n        google: action.google,\n        kaldi: action.kaldi,\n        proba: action.proba,\n        text: action.text,\n        url: action.url\n      })\n      return {\n        ...state,\n        google: '',\n        kaldi: ''\n      }\n    case 'CLEAR_RESPONSES':\n      return {\n        ...state,\n        responses: []\n      }\n    default:\n      return state\n  }\n}\n\nexport default Websocket\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n)\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location)\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl)\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ'\n          )\n        })\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl)\n      }\n    })\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.')\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.')\n            }\n          }\n        }\n      }\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error)\n    })\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload()\n          })\n        })\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl)\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      )\n    })\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister()\n    })\n  }\n}\n","import modules from './modules'\nimport { combineReducers } from 'redux'\n\nexport default combineReducers(modules)\n","import React from 'react'\nimport styled from 'styled-components'\nimport PropTypes from 'prop-types'\n\nconst Slider = styled.div`\n  height: 40px;\n  position: relative;\n  width: 100%;\n`\n\nconst Bar = styled.div`\n  border-radius: 4px;\n  display: block;\n  height: 8px;\n  overflow: hidden;\n  position: relative;\n  top: 16px;\n  width: 100%;\n`\nconst BarFill = styled.div`\n  height: 100%;\n  background: rgba(0, 0, 0, 0.25);\n  transition: width 35ms ease;\n`\n\nconst Track = styled.div`\n  position: absolute;\n  top: 0px;\n  bottom: 0px;\n  right: 5px;\n  left: 5px;\n`\n\nconst Grabber = styled.div`\n  background: #fff;\n  border: 1px solid #dcddde;\n  position: absolute;\n  border-radius: 3px;\n  box-shadow: 0 3px 1px 0 rgba(0, 0, 0, 0.05), 0 2px 2px 0 rgba(0, 0, 0, 0.1),\n    0 3px 3px 0 rgba(0, 0, 0, 0.05);\n  cursor: ew-resize;\n  height: 24px;\n  left: 0px;\n  margin-left: -5px;\n  margin-top: -13px;\n  top: 50%;\n  width: 10px;\n`\n\nclass Meter extends React.Component {\n  static propTypes = {\n    threshold: PropTypes.number.isRequired,\n    width: PropTypes.number.isRequired,\n    handleMouse: PropTypes.func.isRequired\n  }\n\n  render() {\n    const { width, threshold, handleMouse } = this.props\n    return (\n      <Slider>\n        <Bar\n          style={{ background: 'rgb(105, 196, 154) none repeat scroll 0% 0%' }}>\n          <BarFill\n            style={{\n              width: threshold + '%',\n              background: 'rgb(251, 184, 72) none repeat scroll 0% 0%'\n            }}\n          />\n        </Bar>\n        <Bar\n          style={{\n            position: 'absolute',\n            top: '16px',\n            background: 'transparent'\n          }}>\n          <BarFill style={{ width: width + '%' }} />\n        </Bar>\n        <Track onMouseDown={handleMouse}>\n          <Grabber\n            onMouseDown={handleMouse}\n            style={{ left: threshold + '%' }}\n          />\n        </Track>\n      </Slider>\n    )\n  }\n}\n\nexport default Meter\n","export const on_connect = () => {\n  return {\n    type: 'ON_CONNECT'\n  }\n}\n\nexport const update_google = transcript_google => {\n  return {\n    type: 'TRANSCRIPT_GOOGLE',\n    transcript_google\n  }\n}\n\nexport const update_kaldi = transcript_kaldi => {\n  return {\n    type: 'TRANSCRIPT_KALDI',\n    transcript_kaldi\n  }\n}\n\nexport const stop_stream = (google, kaldi, proba, { text, url }) => {\n  return {\n    type: 'STOP_STREAM',\n    google,\n    kaldi,\n    proba,\n    text,\n    url\n  }\n}\n\nexport const clear_responses = () => {\n  return {\n    type: 'CLEAR_RESPONSES'\n  }\n}\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport PropTypes from 'prop-types'\nimport socket from 'socket.io-client'\nimport { bindActionCreators } from 'redux'\nimport {\n  on_connect,\n  update_google,\n  update_kaldi,\n  stop_stream\n} from '../../actions/Websocket'\nimport { tify } from 'chinese-conv'\n\nclass Websocket extends React.Component {\n  state = {\n    context: new AudioContext()\n  }\n  componentDidMount = () => {\n    const { stream, on_connect } = this.props\n    const { context } = this.state\n    this.socket = socket('wss://vawsr.mino.tw/ws')\n    on_connect()\n    this.processor = context.createScriptProcessor(2048, 1, 1)\n    this.sampleRate = context.sampleRate\n    this.processor.connect(context.destination)\n    this.input = context.createMediaStreamSource(stream)\n    this.input.connect(this.processor)\n\n    this.processor.onaudioprocess = e => {\n      const { record } = this.props\n      if (!record) return\n      this.microphoneProcess(e)\n    }\n    this.registerEvents()\n  }\n\n  componentDidUpdate = prevProps => {\n    const { record } = this.props\n    if (prevProps.record === record) return\n    if (!record) {\n      this.stopRecording()\n    }\n  }\n\n  registerEvents = () => {\n    this.socket.on('google_speech_data', ({ transcript }) => {\n      const { update_google } = this.props\n      update_google(transcript)\n    })\n\n    this.socket.on('kaldi_speech_data', ({ transcript }) => {\n      const { update_kaldi } = this.props\n      update_kaldi(tify(transcript.replace(/ /g, '')))\n    })\n\n    this.socket.on('stop_stream', ({ google, kaldi, proba, result }) => {\n      const { stop_stream } = this.props\n      stop_stream(google, tify(kaldi.replace(/ /g, '')), proba, result)\n    })\n  }\n\n  stopRecording = () => {\n    this.socket.emit('stop_stream', '')\n  }\n\n  microphoneProcess = e => {\n    var left = e.inputBuffer.getChannelData(0)\n    var left16\n    if (this.sampleRate > 44100) {\n      left16 = this.downsampleBuffer(left, this.sampleRate, 44100)\n    } else {\n      left16 = this.convertoFloat32ToInt16(left)\n    }\n    this.socket.emit('binary_data', left16)\n  }\n\n  convertoFloat32ToInt16 = buffer => {\n    var l = buffer.length\n    var buf = new Int16Array(l)\n\n    while (l--) {\n      buf[l] = buffer[l] * 0x7fff //convert to 16 bit\n    }\n    return buf.buffer\n  }\n\n  downsampleBuffer = (buffer, sampleRate, outSampleRate) => {\n    if (outSampleRate === sampleRate) {\n      return buffer\n    }\n    if (outSampleRate > sampleRate) {\n      throw Error('downsampling rate show be smaller than original sample rate')\n    }\n    var sampleRateRatio = sampleRate / outSampleRate\n    var newLength = Math.round(buffer.length / sampleRateRatio)\n    var result = new Int16Array(newLength)\n    var offsetResult = 0\n    var offsetBuffer = 0\n    while (offsetResult < result.length) {\n      var nextOffsetBuffer = Math.round((offsetResult + 1) * sampleRateRatio)\n      var accum = 0,\n        count = 0\n      for (\n        var i = offsetBuffer;\n        i < nextOffsetBuffer && i < buffer.length;\n        i++\n      ) {\n        accum += buffer[i]\n        count++\n      }\n\n      result[offsetResult] = Math.min(1, accum / count) * 0x7fff\n      offsetResult++\n      offsetBuffer = nextOffsetBuffer\n    }\n    return result.buffer\n  }\n\n  render() {\n    return <div />\n  }\n}\n\nWebsocket.propTypes = {\n  stream: PropTypes.object.isRequired,\n  record: PropTypes.bool.isRequired,\n  on_connect: PropTypes.func.isRequired,\n  update_google: PropTypes.func.isRequired,\n  update_kaldi: PropTypes.func.isRequired,\n  stop_stream: PropTypes.func.isRequired\n}\n\nconst mapStateToProps = state => {\n  return {\n    record: state.Recorder.record,\n    stream: state.Recorder.stream\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators(\n    { on_connect, update_google, update_kaldi, stop_stream },\n    dispatch\n  )\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Websocket)\n","export const startRecord = () => {\n  return {\n    type: 'START_RECORD'\n  }\n}\n\nexport const stopRecord = () => {\n  return {\n    type: 'STOP_RECORD'\n  }\n}\n\nexport const updateStream = stream => {\n  return {\n    type: 'UPDATE_STREAM',\n    stream\n  }\n}\n\nexport const resume = () => {\n  return {\n    type: 'RESUME_VOLUMEMETER'\n  }\n}\n\nexport const suspend = () => {\n  return {\n    type: 'SUSPEND_VOLUMEMETER'\n  }\n}\n","import React from 'react'\nimport Meter from './Meter'\nimport Cookies from 'universal-cookie'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport PropTypes from 'prop-types'\nimport Websocket from '../Websocket'\nimport { startRecord, stopRecord, updateStream } from '../../actions/Recorder'\n\nclass VolumeMeter extends React.Component {\n  constructor(props) {\n    super(props)\n    window.AudioContext = window.AudioContext || window.webkitAudioContext\n    this.state = {\n      audioContext: new AudioContext(),\n      src: null,\n      volume: 0,\n      threshold: 50,\n      stream: false,\n      stopTimeout: 0\n    }\n    this.cookie = new Cookies()\n  }\n\n  componentDidMount() {\n    const { updateStream } = this.props\n    navigator.mediaDevices.getUserMedia({ audio: true }).then(stream => {\n      updateStream(stream)\n      this.setState(prevState => ({\n        src: prevState.audioContext.createMediaStreamSource(stream),\n        stream: stream\n      }))\n      this.setupAnalyser()\n    })\n    let threshold = this.cookie.get('threshold')\n    if (threshold !== undefined && Number(threshold)) {\n      this.setState({ threshold: Number(threshold) })\n    }\n  }\n\n  setupAnalyser() {\n    const { audioContext, src } = this.state\n    this.analyser = audioContext.createAnalyser()\n    src.connect(this.analyser)\n    this.array = new Uint8Array(this.analyser.frequencyBinCount)\n    setInterval(this.loop, 1000 / 10)\n  }\n\n  loop = () => {\n    const {\n      startRecord,\n      stopRecord,\n      record,\n      logined,\n      suspended,\n      hasivector\n    } = this.props\n    const { stream, threshold, stopTimeout } = this.state\n    if (!logined || !stream || !hasivector) return\n    if (suspended) {\n      stopRecord()\n      return\n    }\n    this.analyser.getByteTimeDomainData(this.array)\n    var total = 0,\n      i = 0,\n      percentage,\n      float,\n      rms,\n      db\n    while (i < this.array.length) {\n      float = this.array[i++] / 0x80 - 1\n      total += float * float\n    }\n    rms = Math.sqrt(total / this.array.length)\n    db = 20 * Math.log10(rms)\n    db = Math.max(-48, Math.min(db, 0))\n    percentage = 100 + db * 2.083\n    this.setState({\n      volume: Number(percentage.toFixed(2))\n    })\n\n    if (percentage >= threshold) {\n      this.setState({ stopTimeout: 0 })\n      if (!record) {\n        startRecord()\n      }\n    } else {\n      if (!record) return\n      if (stopTimeout > 20) {\n        this.setState({ stopTimeout: 0 })\n        stopRecord()\n      } else {\n        this.setState(prevState => ({ stopTimeout: prevState.stopTimeout + 1 }))\n      }\n    }\n  }\n\n  handleMouse = () => {\n    document.addEventListener('mousemove', this.handleMouseMove, true)\n    document.addEventListener('mouseup', this.handleMouseUp, true)\n  }\n  handleMouseMove = event => {\n    let threshold\n    if (event.clientX < this.node.offsetLeft) {\n      threshold = 0\n    } else if (event.clientX > this.node.offsetWidth + this.node.offsetLeft) {\n      threshold = (this.node.offsetWidth / this.node.clientWidth) * 100\n    } else {\n      threshold =\n        ((event.clientX - this.node.offsetLeft) / this.node.clientWidth) * 100\n    }\n\n    this.setState({\n      threshold: threshold\n    })\n  }\n  handleMouseUp = event => {\n    document.removeEventListener('mousemove', this.handleMouseMove, true)\n    document.removeEventListener('mouseup', this.handleMouseUp, true)\n    let threshold\n    if (event.clientX < this.node.offsetLeft) {\n      threshold = 0\n    } else if (event.clientX > this.node.offsetWidth + this.node.offsetLeft) {\n      threshold = (this.node.offsetWidth / this.node.clientWidth) * 100\n    } else {\n      threshold =\n        ((event.clientX - this.node.offsetLeft) / this.node.clientWidth) * 100\n    }\n\n    this.setState({\n      threshold: threshold\n    })\n    this.cookie.set('threshold', threshold)\n  }\n\n  render() {\n    let { volume, threshold, stream } = this.state\n    let { logined } = this.props\n    return (\n      <div ref={node => (this.node = node)}>\n        <Meter\n          handleMouse={this.handleMouse}\n          threshold={threshold}\n          width={volume}\n        />\n        {logined && stream && <Websocket />}\n      </div>\n    )\n  }\n}\n\nVolumeMeter.propTypes = {\n  startRecord: PropTypes.func.isRequired,\n  stopRecord: PropTypes.func.isRequired,\n  updateStream: PropTypes.func.isRequired,\n  record: PropTypes.bool.isRequired,\n  logined: PropTypes.bool.isRequired,\n  suspended: PropTypes.bool.isRequired,\n  hasivector: PropTypes.bool.isRequired\n}\n\nconst mapStateToProps = state => {\n  return {\n    record: state.Recorder.record,\n    suspended: state.Recorder.suspended,\n    logined: state.LoginManager.logined,\n    hasivector: state.LoginManager.hasivector\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators(\n    {\n      startRecord,\n      stopRecord,\n      updateStream\n    },\n    dispatch\n  )\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(VolumeMeter)\n","export const login = user => {\n  return {\n    type: 'LOGIN',\n    fbid: user.fbid,\n    email: user.email,\n    name: user.name,\n    hasivector: user.hasivector,\n    processing: user.processing\n  }\n}\n\nexport const logout = () => {\n  return {\n    type: 'LOGOUT'\n  }\n}\n\nexport const update_status = (hasivector, processing) => {\n  return {\n    type: 'UPDATE_STATUS',\n    hasivector,\n    processing\n  }\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { withStyles } from '@material-ui/core/styles'\nimport Button from '@material-ui/core/Button'\nimport Mic from '@material-ui/icons/Mic'\nimport Stop from '@material-ui/icons/Stop'\nimport MediaStreamRecorder from 'msr'\nimport { connect } from 'react-redux'\n\nconst styles = theme => ({\n  button: {\n    margin: theme.spacing.unit,\n    float: 'right'\n  },\n  record: {\n    margin: '10px 0px'\n  }\n})\n\nclass Record extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      record: false,\n      ready: false\n    }\n  }\n\n  componentDidMount = () => {\n    const { stream } = this.props\n    this.recorder = new MediaStreamRecorder(stream)\n    this.recorder.mimeType = 'audio/wav'\n    this.recorder.audioChannels = 1\n    this.recorder.bufferSize = 2048\n    this.recorder.ondataavailable = blob => {\n      this.props.handleURL(blob)\n    }\n    this.setState({ ready: true })\n  }\n  startRecording = () => {\n    this.setState({\n      record: true\n    })\n    this.recorder.start(100000)\n  }\n\n  stopRecording = () => {\n    this.setState({\n      record: false\n    })\n    this.recorder.stop()\n  }\n\n  render() {\n    const { classes } = this.props\n    return (\n      <div className={classes.record}>\n        <Button\n          className={classes.button}\n          variant=\"fab\"\n          color=\"secondary\"\n          onClick={this.state.record ? this.stopRecording : this.startRecording}\n          type=\"button\"\n          disabled={!this.state.ready}>\n          {this.state.record ? <Stop /> : <Mic />}\n        </Button>\n      </div>\n    )\n  }\n}\n\nRecord.propTypes = {\n  classes: PropTypes.object.isRequired,\n  handleURL: PropTypes.func.isRequired,\n  stream: PropTypes.object.isRequired\n}\n\nconst mapStateToProps = state => {\n  return {\n    stream: state.Recorder.stream\n  }\n}\n\nexport default connect(mapStateToProps)(withStyles(styles)(Record))\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport Button from '@material-ui/core/Button'\nimport Dialog from '@material-ui/core/Dialog'\nimport DialogContent from '@material-ui/core/DialogContent'\nimport DialogContentText from '@material-ui/core/DialogContentText'\nimport DialogTitle from '@material-ui/core/DialogTitle'\nimport PlayArrow from '@material-ui/icons/PlayArrow'\nimport { withStyles } from '@material-ui/core/styles'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport AppBar from '@material-ui/core/AppBar'\nimport Toolbar from '@material-ui/core/Toolbar'\nimport IconButton from '@material-ui/core/IconButton'\nimport Typography from '@material-ui/core/Typography'\nimport CloseIcon from '@material-ui/icons/Close'\nimport green from '@material-ui/core/colors/green'\nimport CircularProgress from '@material-ui/core/CircularProgress'\nimport Slide from '@material-ui/core/Slide'\nimport { connect } from 'react-redux'\nimport { toast } from 'react-toastify'\nimport axios from 'axios'\nimport MobileStepper from '@material-ui/core/MobileStepper'\nimport { bindActionCreators } from 'redux'\n\nimport Record from './Record'\nimport { resume, suspend } from '../../../actions/Recorder'\nimport { update_status } from '../../../actions/LoginManager'\n\nconst styles = theme => ({\n  dots: {\n    backgroundColor: 'inherit'\n  },\n  button: {\n    margin: theme.spacing.unit,\n    float: 'right'\n  },\n  buttonProgress: {\n    color: green[500],\n    position: 'absolute',\n    top: '50%',\n    left: '50%',\n    marginTop: -12,\n    marginLeft: -12\n  },\n  appBar: {\n    position: 'relative'\n  },\n  flex: {\n    flex: 1\n  }\n})\n\nfunction Transition(props) {\n  return <Slide direction=\"up\" {...props} />\n}\n\nexport class RegisterSpeaker extends React.Component {\n  state = {\n    open: false,\n    sentences: [],\n    audioBlob: {},\n    audio: [],\n    step: 0,\n    loading: false\n  }\n\n  handleClick = () => {\n    const { suspend } = this.props\n    suspend()\n    this.generateSentences()\n    this.setState({ open: true })\n  }\n\n  handleClose = () => {\n    const { callback, resume } = this.props\n    resume()\n    this.setState({ open: false })\n    callback()\n  }\n\n  handleBack = () => {\n    if (this.state.step > 0) {\n      this.setState(prevState => ({ step: prevState.step - 1 }))\n    } else {\n      this.handleClose()\n    }\n  }\n\n  handleNext = () => {\n    if (this.state.step < 9) {\n      this.setState(prevState => ({ step: prevState.step + 1 }))\n    } else {\n      const { hostname, update_status } = this.props\n      this.setState({ loading: true })\n      var fd = new FormData()\n      // eslint-disable-next-line\n      for(let i = 0; i < 10; i++){\n        fd.append(`file${i + 1}`, this.state.audioBlob[i], `file${i + 1}.wav`)\n      }\n      axios\n        .post(`${hostname}/registerspeaker`, fd, {\n          headers: {\n            'Content-Type': 'multipart/form-data'\n          }\n        })\n        .then(res => res.data)\n        .then(({ message }) => {\n          toast.success(message)\n          update_status(false, true)\n          this.handleClose()\n        })\n        .catch(err => {\n          toast.error(err.response.data.message)\n          this.setState({ loading: false })\n        })\n    }\n  }\n\n  handleURL = blob => {\n    let obj = {}\n    obj[this.state.step] = blob\n\n    this.setState(prevState => ({\n      audioBlob: Object.assign({}, prevState.audioBlob, obj)\n    }))\n  }\n\n  replayBlob = () => {\n    var blobURL = window.URL.createObjectURL(\n      this.state.audioBlob[this.state.step]\n    )\n    var audio0 = new Audio(blobURL)\n    audio0.play()\n  }\n\n  generateSentences = () => {\n    const { hostname } = this.props\n    axios\n      .get(`${hostname}/sentences.json`)\n      .then(res => res.data)\n      .then(({ sentences }) => {\n        this.setState({ sentences: sentences })\n      })\n      .catch(() => {\n        toast.error('取得語料失敗，請檢查登入是否過期')\n        this.handleClose()\n      })\n  }\n\n  render() {\n    const { classes, hasivector, processing } = this.props\n    const { loading, step, sentences, audioBlob, open } = this.state\n    return (\n      <div>\n        <MenuItem onClick={this.handleClick} disabled={processing}>\n          <p>{hasivector ? '重新註冊語者' : '語者設定'}</p>\n        </MenuItem>\n        <Dialog\n          fullScreen\n          open={open}\n          onClose={this.handleClose}\n          TransitionComponent={Transition}>\n          <AppBar className={classes.appBar}>\n            <Toolbar>\n              <IconButton\n                color=\"inherit\"\n                onClick={this.handleClose}\n                aria-label=\"Close\">\n                <CloseIcon />\n              </IconButton>\n              <Typography variant=\"h6\" color=\"inherit\" className={classes.flex}>\n                語者設定\n              </Typography>\n              <MobileStepper\n                className={classes.dots}\n                variant=\"dots\"\n                steps={10}\n                position=\"static\"\n                activeStep={step}\n                backButton={\n                  <Button onClick={this.handleBack} color=\"inherit\">\n                    Back\n                  </Button>\n                }\n                nextButton={\n                  <Button\n                    onClick={this.handleNext}\n                    color=\"inherit\"\n                    autoFocus\n                    disabled={!audioBlob[step] || loading}>\n                    {step === 9 ? 'Finish' : 'Next'}\n                    {loading && (\n                      <CircularProgress\n                        size={24}\n                        className={classes.buttonProgress}\n                      />\n                    )}\n                  </Button>\n                }\n              />\n            </Toolbar>\n          </AppBar>\n          <DialogTitle id=\"responsive-dialog-title\">\n            {'請朗讀下列文字進行語者註冊'}\n          </DialogTitle>\n          <DialogContent>\n            <DialogContentText id=\"sentences\">\n              {sentences[step]}\n            </DialogContentText>\n            <Record handleURL={this.handleURL} />\n            <Button\n              disabled={!audioBlob[step]}\n              className={classes.button}\n              variant=\"fab\"\n              color=\"secondary\"\n              type=\"button\"\n              onClick={this.replayBlob}>\n              <PlayArrow />\n            </Button>\n          </DialogContent>\n        </Dialog>\n      </div>\n    )\n  }\n}\n\nRegisterSpeaker.propTypes = {\n  classes: PropTypes.object.isRequired,\n  callback: PropTypes.func.isRequired,\n  hasivector: PropTypes.bool.isRequired,\n  hostname: PropTypes.string.isRequired,\n  resume: PropTypes.func.isRequired,\n  processing: PropTypes.bool.isRequired,\n  suspend: PropTypes.func.isRequired,\n  update_status: PropTypes.func.isRequired\n}\nconst mapStateToProps = state => {\n  return {\n    processing: state.LoginManager.processing,\n    hasivector: state.LoginManager.hasivector,\n    hostname: state.Host.hostname\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({ resume, suspend, update_status }, dispatch)\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(withStyles(styles)(RegisterSpeaker))\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport AppBar from '@material-ui/core/AppBar'\nimport Toolbar from '@material-ui/core/Toolbar'\nimport IconButton from '@material-ui/core/IconButton'\nimport Typography from '@material-ui/core/Typography'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport Menu from '@material-ui/core/Menu'\nimport { withStyles } from '@material-ui/core/styles'\nimport MenuIcon from '@material-ui/icons/Menu'\nimport AccountCircle from '@material-ui/icons/AccountCircle'\nimport Avatar from '@material-ui/core/Avatar'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport { toast } from 'react-toastify'\n\nimport FacebookLogin from 'react-facebook-login/dist/facebook-login-render-props'\nimport { login, logout } from '../../actions/LoginManager'\nimport RegisterSpeaker from './RegisterSpeaker'\nimport axios from 'axios'\nimport { clear_responses } from '../../actions/Websocket'\n\naxios.defaults.withCredentials = true\n\nconst styles = theme => ({\n  root: {\n    width: '100%'\n  },\n  grow: {\n    flexGrow: 1\n  },\n  menuButton: {\n    marginLeft: -12,\n    marginRight: 20\n  },\n  title: {\n    display: 'block'\n  },\n  sectionDesktop: {\n    display: 'none',\n    [theme.breakpoints.up('md')]: {\n      display: 'flex'\n    }\n  },\n  sectionMobile: {\n    display: 'flex',\n    [theme.breakpoints.up('md')]: {\n      display: 'none'\n    }\n  }\n})\n\nclass PrimarySearchAppBar extends React.Component {\n  state = {\n    anchorEl: null,\n    anchorEl2: null\n  }\n\n  constructor(props) {\n    super(props)\n    const { hostname, login } = this.props\n    axios\n      .get(`${hostname}/auth`)\n      .then(res => res.data)\n      .then(data => {\n        login(data)\n        console.log('Auth success')\n      })\n      .catch(() => {\n        console.log('Auth failed')\n      })\n  }\n\n  handleProfileMenuOpen = event => {\n    this.setState({ anchorEl: event.currentTarget })\n  }\n\n  handleProfileMenuOpen2 = event => {\n    this.setState({ anchorEl2: event.currentTarget })\n  }\n\n  handleMenuClose = () => {\n    this.setState({ anchorEl: null, anchorEl2: null })\n  }\n\n  handleLogin = res => {\n    const { hostname, login } = this.props\n    axios\n      .post(\n        `${hostname}/login`,\n        {\n          email: res.email,\n          name: res.name,\n          token: res.accessToken,\n          signed: res.signedRequest,\n          fbid: Number(res.id)\n        },\n        {\n          headers: {\n            'Content-Type': 'application/x-www-form-urlencoded'\n          }\n        }\n      )\n      .then(res => res.data)\n      .then(data => {\n        login(data)\n        toast.success('Login success', {\n          position: toast.POSITION.BOTTOM_RIGHT\n        })\n      })\n      .catch(() =>\n        toast.error('Login failed', {\n          position: toast.POSITION.BOTTOM_RIGHT\n        })\n      )\n      .finally(() => {\n        this.handleMenuClose()\n      })\n  }\n\n  handleLogout = () => {\n    const { logout, hostname } = this.props\n    axios.get(`${hostname}/logout`)\n    logout()\n    toast.warn('Logout success', { position: toast.POSITION.BOTTOM_RIGHT })\n    this.handleMenuClose()\n  }\n\n  handleClearResponses = () => {\n    const { clear_responses } = this.props\n    clear_responses()\n    this.handleMenuClose()\n  }\n\n  render() {\n    const { anchorEl, anchorEl2 } = this.state\n    const { classes, logined, stream, user } = this.props\n    const isMenuOpen = Boolean(anchorEl)\n    const isMenuOpen2 = Boolean(anchorEl2)\n\n    const renderMenu = (\n      <Menu\n        anchorEl={anchorEl}\n        anchorOrigin={{ vertical: 'top', horizontal: 'right' }}\n        transformOrigin={{ vertical: 'top', horizontal: 'right' }}\n        open={isMenuOpen}\n        onClose={this.handleMenuClose}>\n        {logined ? (\n          <MenuItem onClick={this.handleLogout}>Logout</MenuItem>\n        ) : (\n          <FacebookLogin\n            appId=\"332358063993706\"\n            fields=\"name,email,picture\"\n            disableMobileRedirect={true}\n            callback={this.handleLogin}\n            render={renderProps => (\n              <MenuItem onClick={renderProps.onClick}>Facebook Login</MenuItem>\n            )}\n          />\n        )}\n        {logined && <RegisterSpeaker callback={this.handleMenuClose} />}\n      </Menu>\n    )\n    const renderMenu2 = (\n      <Menu\n        anchorEl={anchorEl2}\n        anchorOrigin={{ vertical: 'top', horizontal: 'right' }}\n        transformOrigin={{ vertical: 'top', horizontal: 'right' }}\n        open={isMenuOpen2}\n        onClose={this.handleMenuClose}>\n        <MenuItem onClick={this.handleClearResponses}>清理訊息</MenuItem>\n      </Menu>\n    )\n\n    return (\n      <div className={classes.root}>\n        <AppBar position=\"static\">\n          <Toolbar>\n            <IconButton\n              aria-owns={isMenuOpen2 ? 'material-appbar' : null}\n              aria-haspopup=\"true\"\n              className={classes.menuButton}\n              onClick={this.handleProfileMenuOpen2}\n              color=\"inherit\"\n              aria-label=\"Open drawer\">\n              <MenuIcon />\n            </IconButton>\n            <Typography\n              className={classes.title}\n              variant=\"h6\"\n              color=\"inherit\"\n              noWrap>\n              具語者辨識之語音助理\n            </Typography>\n            <div className={classes.grow} />\n            <div className={classes.sectionDesktop}>\n              <IconButton\n                aria-owns={isMenuOpen ? 'material-appbar' : null}\n                aria-haspopup=\"true\"\n                onClick={this.handleProfileMenuOpen}\n                color=\"inherit\">\n                {user.fbid ? (\n                  <Avatar\n                    alt={user.name}\n                    src={`https://graph.facebook.com/${\n                      user.fbid\n                    }/picture?type=normal`}\n                  />\n                ) : (\n                  <AccountCircle />\n                )}\n              </IconButton>\n            </div>\n            <div className={classes.sectionMobile}>\n              <IconButton\n                aria-owns={isMenuOpen ? 'material-appbar' : null}\n                aria-haspopup=\"true\"\n                onClick={this.handleProfileMenuOpen}\n                color=\"inherit\">\n                {user.fbid ? (\n                  <Avatar\n                    alt={user.name}\n                    src={`https://graph.facebook.com/${\n                      user.fbid\n                    }/picture?type=normal`}\n                  />\n                ) : (\n                  <AccountCircle />\n                )}\n              </IconButton>\n            </div>\n          </Toolbar>\n        </AppBar>\n        {stream && renderMenu}\n        {renderMenu2}\n      </div>\n    )\n  }\n}\n\nPrimarySearchAppBar.propTypes = {\n  classes: PropTypes.object.isRequired,\n  logined: PropTypes.bool.isRequired,\n  user: PropTypes.object.isRequired,\n  hostname: PropTypes.string.isRequired,\n  login: PropTypes.func.isRequired,\n  logout: PropTypes.func.isRequired,\n  clear_responses: PropTypes.func.isRequired,\n  stream: PropTypes.object\n}\n\nconst mapStateToProps = state => {\n  return {\n    logined: state.LoginManager.logined,\n    hostname: state.Host.hostname,\n    user: state.LoginManager,\n    stream: state.Recorder.stream\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators(\n    {\n      login,\n      logout,\n      clear_responses\n    },\n    dispatch\n  )\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(withStyles(styles)(PrimarySearchAppBar))\n","import React from 'react'\nimport styled from 'styled-components'\n\nconst FooterP = styled.p`\n  margin: 0px;\n  margin-bottom: 10px;\n`\n\nclass Footer extends React.Component {\n  render() {\n    return (\n      <footer>\n        <FooterP>© YunTech 2018</FooterP>\n      </footer>\n    )\n  }\n}\n\nexport default Footer\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { withStyles } from '@material-ui/core/styles'\nimport classNames from 'classnames'\nimport InputAdornment from '@material-ui/core/InputAdornment'\nimport TextField from '@material-ui/core/TextField'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport Divider from '@material-ui/core/Divider'\n\nconst styles = theme => ({\n  flex: {\n    display: 'flex',\n    flexWrap: 'wrap'\n  },\n  flexRight: {\n    display: 'flex'\n  },\n  clear: {\n    clear: 'both'\n  },\n  margin: {\n    margin: theme.spacing.unit,\n    width: '80%',\n    [theme.breakpoints.up('md')]: {\n      width: '40%'\n    }\n  },\n  marginLeft: {\n    'margin-left': 'auto'\n  },\n  k_margin: {\n    'margin-left': '3px',\n    'margin-right': '3px'\n  }\n})\n\nclass Response extends Component {\n  handleClick = () => {\n    const { url } = this.props\n    if (url) {\n      window.open(url, '_blank')\n    }\n  }\n\n  render() {\n    const { classes, google, kaldi, proba, text, url } = this.props\n    return (\n      <div>\n        {google && (\n          <div className={classes.flex}>\n            <TextField\n              className={classes.margin}\n              label=\"Google\"\n              defaultValue={google}\n              variant=\"outlined\"\n              multiline\n              InputProps={{\n                startAdornment: (\n                  <InputAdornment position=\"start\">\n                    <FontAwesomeIcon icon={['fab', 'google']} />\n                  </InputAdornment>\n                ),\n                readOnly: true\n              }}\n            />\n          </div>\n        )}\n        {kaldi && (\n          <div className={classes.flex}>\n            <TextField\n              className={classes.margin}\n              label=\"Kaldi\"\n              defaultValue={kaldi}\n              multiline\n              variant=\"outlined\"\n              InputProps={{\n                startAdornment: (\n                  <InputAdornment position=\"start\">\n                    <FontAwesomeIcon\n                      className={classes.k_margin}\n                      icon={['fab', 'kaggle']}\n                    />\n                  </InputAdornment>\n                ),\n                readOnly: true\n              }}\n            />\n          </div>\n        )}\n        {text && (\n          <div className={classes.flexRight}>\n            <TextField\n              className={classNames(classes.margin, classes.marginLeft)}\n              label={`The probability: ${proba}`}\n              defaultValue={text + url}\n              multiline\n              variant=\"outlined\"\n              onClick={this.handleClick}\n              InputProps={{\n                startAdornment: (\n                  <InputAdornment position=\"start\">\n                    <FontAwesomeIcon icon={['fas', 'robot']} />\n                  </InputAdornment>\n                ),\n                readOnly: true\n              }}\n            />\n          </div>\n        )}\n        {text && <Divider className={classes.clear} />}\n      </div>\n    )\n  }\n}\n\nResponse.propTypes = {\n  classes: PropTypes.object.isRequired,\n  google: PropTypes.string.isRequired,\n  kaldi: PropTypes.string.isRequired,\n  proba: PropTypes.number,\n  url: PropTypes.string,\n  text: PropTypes.string\n}\n\nexport default withStyles(styles)(Response)\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\nimport Response from './Response'\n\nconst TextArea = styled.div`\n  width: 100%;\n  height: calc(100vh - 132px);\n  overflow: scroll;\n  overflow-x: hidden;\n  border-radius: 10px;\n  background: #eee;\n`\n\nclass AppTextArea extends Component {\n  constructor(props) {\n    super(props)\n    const { responses } = this.props\n    this.responses = [...responses]\n    this.responsesItem = responses.map((res, i) => (\n      <Response key={i} {...res} />\n    ))\n  }\n\n  scrollToBottom() {\n    this.el.scrollTop = this.el.scrollTopMax + 100\n  }\n\n  componentDidUpdate() {\n    this.scrollToBottom()\n  }\n\n  render() {\n    const { google, kaldi, responses } = this.props\n    let responsesItem = this.responsesItem\n    if (responses.length > this.responses.length) {\n      for (let i = this.responses.length; i < responses.length; i++) {\n        responsesItem.push(<Response key={i} {...responses[i]} />)\n      }\n      this.responses = [...responses]\n    } else if (responses < this.responses) {\n      this.responses = []\n      this.responsesItem = []\n      responsesItem = []\n    }\n\n    return (\n      <TextArea\n        innerRef={el => {\n          this.el = el\n        }}>\n        {responsesItem}\n        <Response google={google} kaldi={kaldi} proba={0} text={''} url={''} />\n      </TextArea>\n    )\n  }\n}\n\nAppTextArea.propTypes = {\n  google: PropTypes.string.isRequired,\n  kaldi: PropTypes.string.isRequired,\n  responses: PropTypes.array.isRequired\n}\n\nconst mapStateToProps = state => {\n  return {\n    google: state.Websocket.google,\n    kaldi: state.Websocket.kaldi,\n    responses: state.Websocket.responses\n  }\n}\n\nexport default connect(mapStateToProps)(AppTextArea)\n","import React, { Component } from 'react'\nimport styled from 'styled-components'\nimport VolumeMeter from '../VolumeMeter'\nimport MenuAppBar from '../MenuAppBar'\nimport Footer from '../Footer'\nimport AppTextArea from '../AppTextArea'\nimport { ToastContainer } from 'react-toastify'\nimport 'react-toastify/dist/ReactToastify.css'\n\nconst AppWrapper = styled.div`\n  text-align: center;\n  margin: 0px auto;\n`\n\nclass App extends Component {\n  render() {\n    return (\n      <AppWrapper id=\"app\">\n        <MenuAppBar />\n        <AppTextArea />\n        <VolumeMeter />\n        <Footer />\n        <ToastContainer />\n      </AppWrapper>\n    )\n  }\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { Provider } from 'react-redux'\nimport { createStore } from 'redux'\nimport './index.css'\nimport registerServiceWorker from './registerServiceWorker'\nimport reducers from './reducers'\nimport App from './components/App/'\nimport { BrowserRouter } from 'react-router-dom'\nimport { MuiThemeProvider, createMuiTheme } from '@material-ui/core/styles'\nimport { library } from '@fortawesome/fontawesome-svg-core'\nimport { fab } from '@fortawesome/free-brands-svg-icons'\nimport { fas } from '@fortawesome/free-solid-svg-icons'\n\nlibrary.add(fab, fas)\n\nconst theme = createMuiTheme({\n  typography: {\n    useNextVariants: true\n  }\n})\n\nlet store = createStore(\n  reducers,\n  window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\n)\n\nReactDOM.render(\n  <Provider store={store}>\n    <MuiThemeProvider theme={theme}>\n      <BrowserRouter>\n        <App />\n      </BrowserRouter>\n    </MuiThemeProvider>\n  </Provider>,\n  document.getElementById('root')\n)\nregisterServiceWorker()\n","const LoginManager = (\n  state = { logined: false, hasivector: false, processing: false },\n  action\n) => {\n  switch (action.type) {\n    case 'LOGIN':\n      return {\n        fbid: action.fbid,\n        email: action.email,\n        name: action.name,\n        logined: true,\n        processing: action.processing,\n        hasivector: action.hasivector\n      }\n    case 'LOGOUT':\n      return { logined: false, hasivector: false, processing: false }\n\n    case 'UPDATE_STATUS':\n      return {\n        ...state,\n        processing: action.processing ? action.processing : state.processing,\n        hasivector: action.hasivector ? action.hasivector : state.hasivector\n      }\n\n    default:\n      return state\n  }\n}\n\nexport default LoginManager\n","const Host = (state = { hostname: 'https://vawsr.mino.tw' }, action) => {\n  switch (action.type) {\n    case 'CHANGE_HOST':\n      return Object.assign({}, state, { hostname: action.hostname })\n    default:\n      return state\n  }\n}\n\nexport default Host\n"],"sourceRoot":""}